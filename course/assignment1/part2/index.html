
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="In this session you'll learn about Odometry data, which informs us of a robot's position in an environment. You'll also learn how to control a ROS robot's velocity (and thus its position) using both open and closed-loop control methods.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/com2009/course/assignment1/part2/">
      
      
        <link rel="prev" href="../part1/">
      
      
        <link rel="next" href="../part3/">
      
      
      <link rel="icon" href="../../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Part 2: Odometry & Navigation - ROS2 Course Assignments for COM2009</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Part 2: Odometry & Navigation - ROS2 Course Assignments for COM2009" >
      
        <meta  property="og:description"  content="In this session you'll learn about Odometry data, which informs us of a robot's position in an environment. You'll also learn how to control a ROS robot's velocity (and thus its position) using both open and closed-loop control methods." >
      
        <meta  property="og:image"  content="https://tom-howard.github.io/com2009/assets/images/social/course/assignment1/part2.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://tom-howard.github.io/com2009/course/assignment1/part2/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Part 2: Odometry & Navigation - ROS2 Course Assignments for COM2009" >
      
        <meta  name="twitter:description"  content="In this session you'll learn about Odometry data, which informs us of a robot's position in an environment. You'll also learn how to control a ROS robot's velocity (and thus its position) using both open and closed-loop control methods." >
      
        <meta  name="twitter:image"  content="https://tom-howard.github.io/com2009/assets/images/social/course/assignment1/part2.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  This site is still being prepared and will be ready by 10th February 2025.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ROS2 Course Assignments for COM2009" class="md-header__button md-logo" aria-label="ROS2 Course Assignments for COM2009" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS2 Course Assignments for COM2009
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 2: Odometry & Navigation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ros/" class="md-tabs__link">
          
  
    
  
  ROS

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Coursework

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../waffles/" class="md-tabs__link">
          
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ROS2 Course Assignments for COM2009" class="md-nav__button md-logo" aria-label="ROS2 Course Assignments for COM2009" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    ROS2 Course Assignments for COM2009
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ROS
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Coursework
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Coursework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Assignment #1: An Introduction to ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Links">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity (Motion)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity (Motion)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-degrees-of-freedom-of-a-waffle" class="md-nav__link">
    <span class="md-ellipsis">
      The Degrees of Freedom of a Waffle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry (Position)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry (Position)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#odometry-in-action" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry In Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry In Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-explained" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry: Explained
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry: Explained">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Quaternions?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twist" class="md-nav__link">
    <span class="md-ellipsis">
      Twist
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-data-as-a-feedback-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Data as a Feedback Signal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Data as a Feedback Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python Node to Process Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-navigation-open-loop-velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Controlling Velocity with the ROS2 CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python Node to Make a Robot Move in a circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Implementing a Shutdown Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry-based-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry-based Navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry-based Navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Making our Robot Follow a Square Motion Path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4: Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 5: Actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 6: Cameras, Machine Vision & OpenCV
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started (Week 1)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with your ROS Package (in the Lab)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/part-a/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Part A
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3_4" id="__nav_3_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_4">
            <span class="md-nav__icon md-icon"></span>
            Part A
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-a/task1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Velocity Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-a/task2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 2: Avoiding Obstacles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-a/deadline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preparing Your ROS Package for the Week 6 Deadline
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../extras/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Additional Resources
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Additional Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/launch-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launch Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/course-repo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The TUoS ROS Course Repo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../waffles/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    The Waffles
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/launching-ros/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launching ROS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waffle (& ROS) Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/essentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Further (Essential) Exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/shutdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shutdown Procedures
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Links">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity (Motion)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity (Motion)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-degrees-of-freedom-of-a-waffle" class="md-nav__link">
    <span class="md-ellipsis">
      The Degrees of Freedom of a Waffle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry (Position)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry (Position)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#odometry-in-action" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry In Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry In Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-explained" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry: Explained
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry: Explained">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Quaternions?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twist" class="md-nav__link">
    <span class="md-ellipsis">
      Twist
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-data-as-a-feedback-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Data as a Feedback Signal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Data as a Feedback Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python Node to Process Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-navigation-open-loop-velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Controlling Velocity with the ROS2 CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python Node to Make a Robot Move in a circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Implementing a Shutdown Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry-based-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry-based Navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry-based Navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Making our Robot Follow a Square Motion Path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/tom-howard/com2009/edit/main/docs/course/assignment1/part2.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/com2009/raw/main/docs/course/assignment1/part2.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Part 2: Odometry & Navigation</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> <strong>Exercises</strong>: 6<br />
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"/></svg></span> <strong>Estimated Completion Time</strong>: 3 hours</p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">&para;</a></h3>
<p>In Part 2 you will learn how to control a ROS robot's <strong>position</strong> and <strong>velocity</strong> from both the command line and through ROS Nodes. You will also learn how to interpret the data that allows us to monitor a robot's position in its physical environment (odometry).  The things you will learn here form the basis for all robot navigation in ROS, from simple open-loop methods to more advanced closed-loop control (both of which you will explore).</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">&para;</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Interpret the Odometry data published by a ROS Robot and identify the parts of these messages that are relevant to a 2-wheeled differential drive robot (such as the TurtleBot3).</li>
<li>Develop Python nodes to obtain Odometry messages from an active ROS network and <em>translate</em> them to provide useful information about a robot's <em>pose</em> in a convenient, human-readable way.</li>
<li>Implement <em>open-loop velocity control</em> of a robot using ROS command-line tools.</li>
<li>Develop Python nodes that use open-loop velocity control methods to make a robot follow a pre-defined motion path.</li>
<li>Combine both publisher <em>&amp;</em> subscriber communication methods into a single Python node to implement closed-loop (odometry-based) velocity control of a robot.</li>
<li>Explain the limitations of Odometry-based motion control methods. </li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">&para;</a></h3>
<h4 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="#ex1">Exercise 1: Exploring Odometry Data</a></li>
<li><a href="#ex2">Exercise 2: Creating a Python Node to Process Odometry Data</a></li>
<li><a href="#ex3">Exercise 3: Controlling Velocity with the ROS2 CLI</a></li>
<li><a href="#ex4">Exercise 4: Creating a Python Node to Make a Robot Move in a circle</a></li>
<li><a href="#ex5">Exercise 5: Implementing a Shutdown Procedure</a></li>
<li><a href="#ex6">Exercise 6: Making our Robot Follow a Square Motion Path</a></li>
</ul>
<h4 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="odom_subscriber/">An Odometry Subscriber Node</a></li>
<li><a href="move_circle/">A Simple Velocity Control Node (Move Circle)</a></li>
<li><a href="move_square/">Odometry-based Navigation (Move Square)</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>TODO:</p>
<p><strong>Step 1: Launch your ROS Environment</strong></p>
<p>If you haven't done so already, launch your ROS environment now:</p>
<ol>
<li>OPTION 1</li>
<li>OPTION 2</li>
<li>etc...</li>
</ol>
<p>You should now have access to ROS via a Linux terminal instance. We'll refer to this terminal instance as <strong>TERMINAL 1</strong>.</p>
<p><strong>Step 2: Make Sure The Course Repo is Up-To-Date</strong></p>
<p><a name="course-repo"></a></p>
<p>In Part 1 you should have <a href="../part1/#course-repo">downloaded and installed The Course Repo</a> into your ROS environment. If you haven't done this yet then go back and do it now. If you <em>have</em> already done it, then it's worth just making sure it's all up-to-date, so run the following command now to do so:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div></p>
<p>Then build with Colcon: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-up-to<span class="w"> </span>tuos_ros
</code></pre></div>
<p>And finally, re-source your environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<hr />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have any other terminal instances open, then you'll need run <code>source ~/.bashrc</code> in these too, in order for any changes made by the Colcon build process to propagate through to these as well.</p>
</div>
<p><strong>Step 3: Launch a Waffle Simulation</strong></p>
<p>In <strong>TERMINAL 1</strong> enter the following command to launch a simulation of a TurtleBot3 Waffle in an empty world:  </p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div></p>
<hr />
<p>A Gazebo simulation window should open and within this you should see a TurtleBot3 Waffle in empty space:</p>
<figure>
<p><img alt="" src="../../../images/gz/waffle_empty_world.svg" width="800" /></p>
</figure>
<p align="center"><strong><em>You're all set up and ready to go!</em></strong></p>

<h2 id="velocity">Velocity (Motion)<a class="headerlink" href="#velocity" title="Permanent link">&para;</a></h2>
<p>In Part 1 we learnt about ROS Topics, and about how the <code>teleop_keyboard</code> node could be used to publish messages to a particular topic in order to control the velocity of the robot (and thus change its <em>position</em>).</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <em>topic</em> is used to control the velocity of the robot?</li>
<li>What <em>message type</em> does this topic use?</li>
</ol>
<p><a href="../part1/#ex3">Return here if you need a reminder on how to find the answers to these questions</a>.</p>
</div>
<p>We also learnt how to find out more about this particular message type (using the <code>ros2 interface show</code> command): </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Vector3  linear
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>        float64 x
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>        float64 y
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>        float64 z
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>Vector3  angular
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        float64 x
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        float64 y
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        float64 z
</code></pre></div>
<h3 id="velocity-commands">Velocity Commands<a class="headerlink" href="#velocity-commands" title="Permanent link">&para;</a></h3>
<p>When defining velocity commands for a ROS robot, there are <strong>six</strong> <em>"fields"</em> that we can assign values to: <strong>two</strong> velocity <em>types</em>, each with <strong>three</strong> velocity <em>components</em>: </p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Velocity Type</th>
<th style="text-align: center;">Component 1</th>
<th style="text-align: center;">Component 2</th>
<th style="text-align: center;">Component 3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>linear</code></td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>z</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>angular</code></td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>z</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<p>These relate to a robot's <strong>six degrees of freedom</strong>, and the topic messages are therefore formatted to give a ROS Programmer the ability to <em>ask</em> a robot to move in any one of its six DOFs. </p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Component (Axis)</th>
<th style="text-align: center;">Linear Velocity</th>
<th style="text-align: center;">Angular Velocity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>X</strong></td>
<td style="text-align: center;">"Forwards/Backwards"</td>
<td style="text-align: center;">"Roll"</td>
</tr>
<tr>
<td style="text-align: center;"><strong>Y</strong></td>
<td style="text-align: center;">"Left/Right"</td>
<td style="text-align: center;">"Pitch"</td>
</tr>
<tr>
<td style="text-align: center;"><strong>Z</strong></td>
<td style="text-align: center;">"Up/Down"</td>
<td style="text-align: center;">"Yaw"</td>
</tr>
</tbody>
</table>
<p></center></p>
<h3 id="the-degrees-of-freedom-of-a-waffle">The Degrees of Freedom of a Waffle<a class="headerlink" href="#the-degrees-of-freedom-of-a-waffle" title="Permanent link">&para;</a></h3>
<p>The three "axes" in the table above are termed the <em>"Principal Axes."</em> In the context of our TurtleBot3 Waffle, these axes and the motion about them are defined as follows:</p>
<p><a name="principal-axes"></a></p>
<figure>
<p><img alt="" src="../../../images/waffle/principal_axes.svg" width="800" /></p>
</figure>
<p>As discussed above, a mobile robot can have up to six degrees of freedom <em>in total</em>, but this depends upon the robot's design and the actuators it is equipped with. </p>
<p>Our TurtleBot3 Waffles only have two motors. These two motors can be controlled independently (in what is known as a <em>"differential drive"</em> configuration), which ultimately provides it with a total of <strong>two degrees of freedom</strong> overall, as illustrated below.</p>
<figure>
<p><img alt="" src="../../../images/waffle/velocities.svg" width="800" /></p>
</figure>
<p>When issuing Velocity Commands therefore, only two (of the six) velocity command fields are applicable: <strong>linear</strong> velocity in the <strong>x</strong>-axis (<em>Forwards/Backwards</em>) and <strong>angular</strong> velocity about the <strong>z</strong>-axis (<em>Yaw</em>).</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Principal Axis</th>
<th style="text-align: center;">Linear Velocity</th>
<th style="text-align: center;">Angular Velocity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>X</strong></td>
<td style="text-align: center;"><strong>"Forwards/Backwards"</strong></td>
<td style="text-align: center;"><del>"Roll"</del></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Y</strong></td>
<td style="text-align: center;"><del>"Left/Right"</del></td>
<td style="text-align: center;"><del>"Pitch"</del></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Z</strong></td>
<td style="text-align: center;"><del>"Up/Down"</del></td>
<td style="text-align: center;"><strong>"Yaw"</strong></td>
</tr>
</tbody>
</table>
<p></center></p>
<p><a name="velocity_limits"></a></p>
<div class="admonition note">
<p class="admonition-title">Maximum Velocity Limits</p>
<p>Keep in mind (while we're on the subject of velocity) that our TurtleBot3 Waffles have <strong>maximum velocity limits</strong>:</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Velocity Component</th>
<th style="text-align: center;">Upper Limit</th>
<th style="text-align: left;">Units</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><em>Linear (X)</em></td>
<td style="text-align: center;">0.26</td>
<td style="text-align: left;">m/s</td>
</tr>
<tr>
<td style="text-align: left;"><em>Angular (Z)</em></td>
<td style="text-align: center;">1.82</td>
<td style="text-align: left;">rad/s</td>
</tr>
</tbody>
</table>
<p></center></p>
</div>
<h2 id="odometry">Odometry (Position)<a class="headerlink" href="#odometry" title="Permanent link">&para;</a></h2>
<h3 id="odometry-in-action">Odometry In Action<a class="headerlink" href="#odometry-in-action" title="Permanent link">&para;</a></h3>
<p>Let's take another look at <em>all</em> the topics that can be used to communicate with our robot:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<p>Another topic of interest here is <code>/odom</code>. This topic contains <em>Odometry data</em>, which is also essential for robot navigation, giving us an approximation of a robot's location in its environment.</p>
<p>Let's explore this further now, using <code>rqt</code>.</p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 1: Exploring Odometry Data<a class="headerlink" href="#ex1" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>In <strong>TERMINAL 2</strong> launch <code>rqt</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>rqt
</code></pre></div></p>
<hr />
</li>
<li>
<p>From the top menu select <code>Plugins</code> &gt; <code>Topics</code> &gt; <code>Topic Monitor</code></p>
<p><em>Topic Monitor</em> should then present you with a list of active topics which matches the topic list from the <code>ros2 topic list</code> command that you ran earlier.</p>
</li>
<li>
<p>Check the box next to <code>/odom</code> and click the arrow next to it to expand the topic and reveal four <em>base fields</em>.</p>
</li>
<li>
<p>Expand the <code>pose</code> &gt; <code>pose</code> &gt; <strong><code>position</code></strong> and <strong><code>orientation</code></strong> fields to reveal the data being published to the <em>three</em> position and <em>four</em> orientation values of this message.</p>
</li>
<li>
<p>Also expand the <code>twist</code> &gt; <code>twist</code>, <strong><code>linear</code></strong> and <strong><code>angular</code></strong> fields to reveal the <em>six</em> values being published here too.</p>
<p><figure markdown>
  <img alt="" src="../../../images/rqt/topic_monitor.png" width="600" />
</figure></p>
</li>
<li>
<p>Next, launch a new terminal instance, we'll call this one <strong>TERMINAL 3</strong>. Arrange this next to the <code>rqt</code> window, so that you can see them both simultaneously.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> launch the <code>teleop_keyboard</code> node <a href="../part1/#teleop">as you did in Part 1</a>: <a name="teleop"></a></p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div></p>
<hr />
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-a">A</kbd></span> a couple of times to make the robot rotate on the spot. Observe how the odometry data changes in Topic Monitor.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <code>pose</code> fields are changing?</li>
<li>Is there anything in the <code>twist</code> part of the message that corresponds to the <em>angular</em> velocity that is being published by the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>? </li>
</ol>
</div>
</li>
<li>
<p>Now press the <span class="keys"><kbd class="key-s">S</kbd></span> key to halt the robot, then press <span class="keys"><kbd class="key-w">W</kbd></span> a couple of times to make the robot drive forwards.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <code>pose</code> fields are changing <em>now</em>? How does this relate to the position of the robot in the simulated world?</li>
<li>How does the <code>twist</code> part of the message now correspond with the <em>linear</em> velocity setting in <strong>TERMINAL 3</strong>?</li>
</ol>
</div>
</li>
<li>
<p>Now press <span class="keys"><kbd class="key-d">D</kbd></span> a couple of times and your robot should start to move in a circle.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>What linear and angular velocities are you requesting in <strong>TERMINAL 3</strong>, and how are these represented in the <code>twist</code> part of the <code>/odom</code> message?</li>
<li>What about the <code>pose</code> part of the message? How is this data changing as your robot moves in a circular path.</li>
<li><strong>What are <code>twist</code> and <code>pose</code> actually telling us?</strong></li>
</ol>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-s">S</kbd></span> in <strong>TERMINAL 3</strong> to stop the robot (but leave the <code>teleop_keyboard</code> node running).  Then, press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> to close down <code>rqt</code>. </p>
</li>
<li>
<p>Let's look at the Odometry data differently now. With the robot stationary, use <code>ros2 run</code> to run a Python node from the <code>tuos_examples</code> package: </p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>tuos_examples<span class="w"> </span>robot_pose
</code></pre></div></p>
<hr />
</li>
<li>
<p>Now (using the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>) drive your robot around again, keeping an eye on the outputs that are being printed by the <code>robot_pose</code> node in <strong>TERMINAL 2</strong> as you do so.</p>
<p>The output of the <code>robot_pose</code> node shows you how the robot's <em>position</em> and <em>orientation</em> (i.e. <em>"pose"</em>) are changing in real-time as you move the robot around. The <code>"initial"</code> column tells us the robot's pose when the node was first launched, and the <code>"current"</code> column show us what its pose currently is. The <code>"delta"</code> column then shows the difference between the two.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Which pose parameters <em>haven't</em> changed, and is this what you would expect (considering <a href="#principal-axes">the robot's principal axes, as illustrated above</a>)?</p>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> and <strong>TERMINAL 3</strong>, to stop the <code>robot_pose</code> and <code>teleop_keyboard</code> nodes. </p>
</li>
</ol>
<h3 id="odometry-explained">Odometry: Explained<a class="headerlink" href="#odometry-explained" title="Permanent link">&para;</a></h3>
<p>Hopefully you have a good idea of what Odometry is now, but let's dig a little deeper using some key ROS command line tools again:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/odom
</code></pre></div></p>
<hr />
<p>This provides information about the <em>type</em> of message used by this topic:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Type: nav_msgs/msg/Odometry
</code></pre></div>
<p>We can find out more about this message using the <code>ros2 interface show</code> command:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>nav_msgs/msg/Odometry
</code></pre></div></p>
<hr />
<p>Look down the far left-hand side to identify the four <em>base fields</em> of the message (i.e. the fields that are not indented):</p>
<p><a name="odom-base-fields"></a></p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>header</code></td>
<td style="text-align: center;"><code>std_msgs/Header</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>child_frame_id</code></td>
<td style="text-align: center;"><code>string</code></td>
</tr>
<tr>
<td style="text-align: center;"><strong>3</strong></td>
<td style="text-align: center;"><strong><code>pose</code></strong></td>
<td style="text-align: center;"><strong><code>geometry_msgs/PoseWithCovariance</code></strong></td>
</tr>
<tr>
<td style="text-align: center;"><strong>4</strong></td>
<td style="text-align: center;"><strong><code>twist</code></strong></td>
<td style="text-align: center;"><strong><code>geometry_msgs/TwistWithCovariance</code></strong></td>
</tr>
</tbody>
</table>
<p></center></p>
<p>We saw all these in <code>rqt</code> earlier. As before, its items 3 and 4 that are of most interest to us...</p>
<h4 id="pose">Pose<a class="headerlink" href="#pose" title="Permanent link">&para;</a></h4>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a># Estimated pose that is typically relative to a fixed world frame.
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>geometry_msgs/PoseWithCovariance pose
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>        Pose pose
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>                Point position
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>                        float64 x
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>                        float64 y
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>                        float64 z
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>                Quaternion orientation
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>                        float64 x
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>                        float64 y
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>                        float64 z
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>                        float64 w
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        float64[36] covariance
</code></pre></div>
<p>As you can see above, there are two key components to Pose:</p>
<ol>
<li><code>position</code>: Tells us where our robot is located in 3-dimensional space. This is expressed in units of <strong>meters</strong>.</li>
<li><code>orientation</code>: Tells us which way our robot is pointing in its environment. This is expressed in units of <strong>Quaternions</strong>, which is a mathematically convenient way to store data related to a robot's orientation (it's a bit hard for us humans to understand and visualise this though, so we'll talk about how to convert it to a different format later).</li>
</ol>
<p>Pose is defined relative to an arbitrary reference point (typically where the robot was when it was turned on), and is determined from:</p>
<ul>
<li>Data from the Inertial Measurement Unit (IMU) on the OpenCR board</li>
<li>Data from both the left and right wheel encoders</li>
<li>A <em>kinematic model</em> of the robot</li>
</ul>
<p>All the above information can then be used to calculate (and keep track of) the distance travelled by the robot from its pre-defined reference point using a process called <em>"dead-reckoning."</em></p>
<h4 id="what-are-quaternions">What are Quaternions?<a class="headerlink" href="#what-are-quaternions" title="Permanent link">&para;</a></h4>
<p>Quaternions use <strong>four values</strong> to represent the orientation of something in 3 dimensional space<sup id="fnref:quaternions"><a class="footnote-ref" href="#fn:quaternions">1</a></sup>, as we can observe from the structure of the <code>nav_msgs/msg/Odometry</code> ROS message:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Quaternion orientation
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>        float64 x
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>        float64 y
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>        float64 z
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>        float64 w
</code></pre></div>
<p>For us, it's easier to think about the orientation of our robot in a <em>"Euler Angle"</em> representation, which tell us the degree of rotation about the <em>three principal axes</em> (<a href="#principal-axes">as discussed above</a>):</p>
<ul>
<li><code>&theta;<sub>x</sub></code>, aka: <strong>"Roll"</strong></li>
<li><code>&theta;<sub>y</sub></code>, aka: <strong>"Pitch"</strong></li>
<li><code>&theta;<sub>z</sub></code>, aka: <strong>"Yaw"</strong></li>
</ul>
<p>Fortunately, the maths involved in converting between these two orientation formats is fairly straight forward (<a href="https://automaticaddison.com/how-to-convert-a-quaternion-into-euler-angles-in-python/">see here</a>).</p>
<p>Recall from above however, that our TurtleBot3 can only move in a 2D plane (unfortunately, it can't fly!) and so, actually, its pose can be fully represented by just 3 terms: </p>
<ul>
<li><code>x</code> &amp; <code>y</code>: the 2D coordinates of the robot in the <code>X-Y</code> plane</li>
<li><code>&theta;<sub>z</sub></code>: the angle of the robot about the <code>z</code> (<em>yaw</em>) axis</li>
</ul>
<h4 id="twist">Twist<a class="headerlink" href="#twist" title="Permanent link">&para;</a></h4>
<p>The fourth <em>base field</em> within the <code>nav_msgs/msg/Odometry</code> message is <strong>Twist</strong>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a># Estimated linear and angular velocity relative to child_frame_id.
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>geometry_msgs/TwistWithCovariance twist
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>        Twist twist
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>                Vector3  linear
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>                        float64 x
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>                        float64 y
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>                        float64 z
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>                Vector3  angular
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>                        float64 x
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>                        float64 y
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>                        float64 z
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>        float64[36] covariance
</code></pre></div>
<p>This might look familiar from <a href="#velocity">earlier</a>! This tells us the current linear and angular velocities of the robot. These velocities are <em>set</em> by messages published to <code>/cmd_vel</code>, but are then <em>monitored</em> by data coming directly from the robot's wheel encoders, and are provided here as a <em>feedback signal</em>.</p>
<h3 id="odometry-data-as-a-feedback-signal">Odometry Data as a Feedback Signal<a class="headerlink" href="#odometry-data-as-a-feedback-signal" title="Permanent link">&para;</a></h3>
<p>Odometry data can be really useful for robot navigation, allowing us to keep track of where a robot is, how it's moving and how to get back to where we started. We therefore need to know how to use odometry data effectively within our Python nodes, and we'll explore this now.</p>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 2: Creating a Python Node to Process Odometry Data<a class="headerlink" href="#ex2" title="Permanent link">&para;</a></h4>
<p>In Part 1 we learnt how to create a package and build simple Python nodes to publish and subscribe to messages on a topic (called <code>/my_topic</code>). In this exercise we'll build a new subscriber node, much like we did previously, but this one will subscribe to the <code>/odom</code> topic that we've been talking about above. We'll also create a new package called <code>part2_navigation</code> for this node to live in!</p>
<ol>
<li>
<p>First, head to the <code>src</code> folder of your ROS2 workspace in your terminal and into the <code>tuos_ros</code> Course Repo:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/
</code></pre></div>
</li>
<li>
<p>Then, use the <code>create_pkg.sh</code> helper script to create your new package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>./create_pkg.sh<span class="w"> </span>part2_navigation
</code></pre></div>
</li>
<li>
<p>Then navigate into the <code>scripts</code> folder of the new package using the <code>cd</code> command again:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">cd</span><span class="w"> </span>../part2_navigation/scripts/
</code></pre></div>
</li>
<li>
<p>The subscriber that we will build here will be structured in much the same way as the subscriber that we built in Part 1. </p>
<p>As a starting point, copy across the <code>subscriber.py</code> file from your <code>part1_pubsub</code> package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>cp<span class="w"> </span>~/ros2_ws/src/part1_pubsub/scripts/subscriber.py<span class="w"> </span>./odom_subscriber.py
</code></pre></div>
</li>
<li>
<p>Next, follow <a href="odom_subscriber/">the steps for converting this into an Odometry subscriber</a>. <a name="odom_sub_ret"></a></p>
</li>
<li>
<p>You'll need to add a new dependency to your package's <code>package.xml</code> file now. Below the <code class="highlight"><span class="nt">&lt;exec_depend&gt;</span>rclpy<span class="nt">&lt;/exec_depend&gt;</span></code> line, add an execution dependency for <code>nav_msgs</code>:</p>
<div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">&lt;exec_depend&gt;</span>rclpy<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">&lt;exec_depend&gt;</span>nav_msgs<span class="nt">&lt;/exec_depend&gt;</span>
</code></pre></div>
</li>
<li>
<p>Next, declare the <code>odom_subscriber.py</code> node as an executable. Replace <code>minimal_node.py</code> with <code>odom_subscriber.py</code> in the <code>CMakeLists.txt</code>:</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a># Install Python executables
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>install(PROGRAMS
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  scripts/odom_subscriber.py
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>)
</code></pre></div>
</li>
<li>
<p>Finally, head back to the terminal and use Colcon to build the package, and the <code>odom_subscriber.py</code> node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>Now we're ready to run this! Do so using <code>ros2 run</code> and see what it does:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>odom_subscriber.py
</code></pre></div>
</li>
<li>
<p>Having followed all the steps, the output from your node should be similar to that shown below:</p>
<p>[TODO: a gif]</p>
</li>
<li>
<p>Observe how the output (the formatted odometry data) changes whilst you move the robot around using the <code>teleop_keyboard</code> node in a new terminal instance (<strong>TERMINAL 3</strong>).</p>
</li>
<li>Stop your <code>odom_subscriber.py</code> node in <strong>TERMINAL 2</strong> and the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong> by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in each of the terminals.</li>
</ol>
<h2 id="basic-navigation-open-loop-velocity-control">Basic Navigation: Open-loop Velocity Control<a class="headerlink" href="#basic-navigation-open-loop-velocity-control" title="Permanent link">&para;</a></h2>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 3: Controlling Velocity with the ROS2 CLI<a class="headerlink" href="#ex3" title="Permanent link">&para;</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that you've stopped the <code>teleop_keyboard</code> node before starting this exercise!</p>
</div>
<p><a name="rostopic_pub"></a>We can use the <code>ros2 topic pub</code> command to <em>publish</em> data to a topic from a terminal by using the command in the following way:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span><span class="o">{</span>topic_name<span class="o">}</span><span class="w"> </span><span class="o">{</span>message_type<span class="o">}</span><span class="w"> </span><span class="o">{</span>message_data<span class="o">}</span>
</code></pre></div>
<p><a href="#velocity-commands">As we discovered earlier</a>, the <code>/cmd_vel</code> topic is expecting messages containing <em>linear</em> and <em>angular</em> velocity data, each with an <code>x</code>, <code>y</code> and <code>z</code> component. When publishing topic messages in a terminal the commands can get quite long and complicated, but we can use <em>autocomplete</em> functionality to help us format the full command correctly.</p>
<ol>
<li>
<p>In <strong>TERMINAL 3</strong> <em>type</em> the following, using the <span class="keys"><kbd class="key-tab">Tab</kbd></span> key where indicated to invoke autocompletion...</p>
<ol>
<li>
<p>First, type the text as shown below and then press the <span class="keys"><kbd class="key-tab">Tab</kbd></span> key where indicated to complete the <em>topic name</em> for you:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>ros2 topic pub /cmd_[TAB]
</code></pre></div>
</li>
<li>
<p>Then, type <strong><code>g</code></strong> and then press <span class="keys"><kbd class="key-tab">Tab</kbd></span> again to format the rest of the <em>message type</em> for you: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>ros2 topic pub /cmd_vel g[TAB]
</code></pre></div>
</li>
<li>
<p>The message data then needs to be entered inside quotation marks, type <strong><code>"l</code></strong> and then press <span class="keys"><kbd class="key-tab">Tab</kbd></span> again to obtain the format of the <em>message data</em>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/Twist &quot;l[TAB]
</code></pre></div>
<p>The full command will then be presented:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/Twist &quot;linear:
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>  x: 0.0
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>  y: 0.0
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>  z: 0.0
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>angular:
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>  x: 0.0
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>  y: 0.0
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>  z: 0.0&quot;
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <span class="keys"><kbd class="key-tab">Tab</kbd></span> to autocomplete lots of terminal commands, experiment with it - it'll save you lots of time! </p>
</div>
</li>
</ol>
</li>
<li>
<p>Scroll back through the message using the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key on your keyboard and then edit the values of the various fields, as appropriate.</p>
<p>First, define some values that would make the robot <strong>rotate on the spot</strong>.  </p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the message from being published.</p>
<p>What happens to the robot when you stop the <code>ros2 topic pub</code> command?</p>
<p>... it keeps on moving at the requested velocity!</p>
<p>In order to make the robot actually stop, we need to publish a <em>new</em> message containing alternative velocity commands.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> press the <span class="keys"><kbd class="key-arrow-up">Up</kbd></span> key on your keyboard to recall the previous command, but don't press <span class="keys"><kbd class="key-enter">Enter</kbd></span> just yet! Now press the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key to track back through the message and change the velocity field values in order to now make the robot <strong>stop</strong>.</p>
</li>
<li>
<p>Once again, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the publisher from actively publishing new messages, and then follow the same steps as above to compose <em>another</em> new message to now make the robot <strong>move in a circle</strong>.</p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to again stop the message from being published, publish a further new message to stop the robot, and then compose (and publish) a message that would make the robot <strong>drive in a straight line</strong>.</p>
</li>
<li>
<p>Finally, <strong>stop</strong> the robot again!</p>
</li>
</ol>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 4: Creating a Python Node to Make a Robot Move in a circle<a class="headerlink" href="#ex4" title="Permanent link">&para;</a></h4>
<p>Controlling a robot from the terminal (or by using the <code>teleop_keyboard</code> node) is all well and good, but what about if we need to implement some more advanced control or <em>autonomy</em>?</p>
<p>We'll now learn how to control the velocity of our robot <em>programmatically</em>, from a Python Node. We'll start out with a simple example to achieve a simple velocity profile (a circle), but this will provide us with the basis on which we can build more complex velocity control algorithms (which we'll look at in the following exercise).</p>
<p>In Part 1 we built <a href="../part1/publisher/">a simple publisher node</a>, and this one will work in much the same way, but this time however, we need to publish <code>Twist</code> type messages to the <code>/cmd_vel</code> topic instead... </p>
<ol>
<li>
<p>In <strong>TERMINAL 2</strong>, ensure that you're located within the <code>scripts</code> folder of your <code>part2_navigation</code> package (you could use <code>pwd</code> to check your current working directory).</p>
<p>If you aren't located here then navigate to this directory using <code>cd</code>.</p>
</li>
<li>
<p>Create a new file called <code>move_circle.py</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>touch<span class="w"> </span>move_circle.py
</code></pre></div>
... and make this file executable using the <code>chmod</code> command (<a href="../part1/#chmod">as we did in Part 1</a>).</p>
<hr />
</li>
<li>
<p>The task is to make the robot move in a <strong>circle</strong> with a path <strong>radius</strong> of approximately <strong>0.5 meters</strong>.</p>
<p>Follow <a href="move_circle/">the steps here for building this</a> (using the Part 1 Publisher Node as a starting point). <a name="move_circle_ret"></a></p>
</li>
<li>
<p>Our <code>move_circle.py</code> node has a new dependency:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">geometry_msgs.msg</span><span class="w"> </span><span class="kn">import</span> <span class="n">Twist</span>
</code></pre></div>
<p>We therefore need to add this dependency to our package's <code>package.xml</code> file.</p>
<p>Earlier on we added <code>nav_msgs</code> to this. Below this, add a new <code class="highlight"><span class="nt">&lt;exec_depend&gt;</span></code> for <code>geometry_msgs</code>:</p>
<div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">&lt;exec_depend&gt;</span>rclpy<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="nt">&lt;exec_depend&gt;</span>nav_msgs<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nt">&lt;exec_depend&gt;</span>geometry_msgs<span class="nt">&lt;/exec_depend&gt;</span><span class="w">  </span><span class="cm">&lt;!-- (1)! --&gt;</span>
</code></pre></div>
<ol>
<li>ADD THIS LINE!</li>
</ol>
</li>
<li>
<p>Next (hopefully you're getting the idea by now!), declare the <code>move_circle.py</code> node as an executable in the <code>CMakeLists.txt</code>:</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a># Install Python executables
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>install(PROGRAMS
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>  scripts/odom_subscriber.py
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>  scripts/move_circle.py
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>)
</code></pre></div>
</li>
<li>
<p>Finally, head back to the terminal and use Colcon to build the new node alongside everything else in the package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>Run this node now, using <code>ros2 run</code> and see what happens:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>move_circle.py
</code></pre></div>
<p>Head back to the Gazebo simulation and watch as the robot moves around in a circle of 0.5 meter radius!</p>
</li>
<li>
<p>Once you're done, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> to stop the <code>move_circle.py</code> node. <strong>Notice what happens to the robot when you do this</strong>...</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What <em>does</em> happen to the robot when you hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to stop the node?</p>
<p><strong>Answer</strong>: It carries on moving <img alt="😮" class="twemoji" src="../../../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f62e.svg" title=":open_mouth:">!</p>
</div>
</li>
</ol>
<h4 id="ex5"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 5: Implementing a Shutdown Procedure<a class="headerlink" href="#ex5" title="Permanent link">&para;</a></h4>
<p>Clearly, our work on the <code>move_circle.py</code> node isn't quite done. When we terminate our node we'd expect the robot to stop moving, but this (currently) isn't the case. </p>
<p>You may have also noticed (with all the nodes that we have created so far) an error traceback in the terminal, every time we hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>. </p>
<p>None of this is very good, and we'll address this now by modifying the <code>move_circle.py</code> file to incorporate a proper (and <em>safe</em>) shutdown procedure.</p>
<ol>
<li>
<p>Return to the <code>move_circle.py</code> file in VS Code. </p>
</li>
<li>
<p>First, we need to add an import to our Node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rclpy.signals</span><span class="w"> </span><span class="kn">import</span> <span class="n">SignalHandlerOptions</span>
</code></pre></div>
<p>You'll see what this is for shortly...</p>
</li>
<li>
<p>Then move on to the <code>__init__()</code> method of your <code>Circle()</code> class.</p>
<p>Add in a boolean flag here called <code>shutdown</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p>... to begin with, we want this to be set to <code>False</code>.</p>
</li>
<li>
<p>Next, add a new method to your <code>Circle()</code> class, called <code>on_shutdown()</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">on_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>        <span class="s2">&quot;Stopping the robot...&quot;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    <span class="p">)</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">my_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">Twist</span><span class="p">())</span> <span class="c1"># (1)!</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>All velocities within the <code>Twist()</code> message class are set to zero by default, so we can just publish this as-is, in order to ask the robot to stop.</li>
<li>Set the <code>shutdown</code> flag to true to indicate that a stop message has now been published.</li>
</ol>
</li>
<li>
<p>Finally, head to the <code class="highlight"><span class="n">main</span><span class="p">()</span></code> function of the script. This is where most of the changes need to be made...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>        <span class="n">signal_handler_options</span><span class="o">=</span><span class="n">SignalHandlerOptions</span><span class="o">.</span><span class="n">NO</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>    <span class="p">)</span> <span class="c1"># (1)!</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>    <span class="n">move_circle</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">()</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">move_circle</span><span class="p">)</span> <span class="c1"># (2)!</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>        <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">move_circle</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> received a shutdown request (Ctrl+C).&quot;</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>        <span class="p">)</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>    <span class="k">finally</span><span class="p">:</span> 
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">()</span> <span class="c1"># (4)!</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">move_circle</span><span class="o">.</span><span class="n">shutdown</span><span class="p">:</span> <span class="c1"># (5)!</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>            <span class="k">continue</span>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">destroy_node</span><span class="p">()</span> <span class="c1"># (6)!</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div>
<ol>
<li>
<p>When initialising <code>rclpy</code>, we're requesting for our <code>move_circle.py</code> node to handle <em>"signals"</em> (i.e. events like a <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>), rather than letting <code>rclpy</code> handle these for us. Here we're using the <code>SignalHandlerOptions</code> object that we imported from <code>rclpy.signals</code> earlier.</p>
</li>
<li>
<p>We set our node to spin inside a Try-Except block now, so that we can catch a <code class="highlight"><span class="ne">KeyboardInterrupt</span></code> (i.e. a <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>) and act accordingly when this happens.</p>
</li>
<li>
<p>On detection of the <code class="highlight"><span class="ne">KeyboardInterrupt</span></code> we print a message to the terminal. After this, the code will move on to the <code class="highlight"><span class="k">finally</span></code> block...</p>
</li>
<li>
<p>Call the <code>on_shutdown()</code> method that we defined earlier. This will ensure that a STOP command is published to the robot (via <code>/cmd_vel</code>).</p>
</li>
<li>
<p>This <code class="highlight"><span class="k">while</span></code> loop will continue to iterate until our boolean <code>shutdown</code> flag has turned <code>True</code>, to indicate that the STOP message has been published.</p>
</li>
<li>
<p>The rest is the same as before...</p>
<p>... destroy the node and then shutdown <code>rclpy</code>.</p>
</li>
</ol>
</li>
<li>
<p>With all this in place, run the node again now (<code>ros2 run ...</code>).</p>
<p>Now, when you hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> you should find that the robot actually stops moving. Ah, much better!</p>
</li>
</ol>
<h2 id="odometry-based-navigation">Odometry-based Navigation<a class="headerlink" href="#odometry-based-navigation" title="Permanent link">&para;</a></h2>
<p>Over the course of the previous two exercises we've created a Python node to make your robot move using <em>open-loop control</em>. To achieve this we published velocity commands to the <code>/cmd_vel</code> topic to make the robot follow a circular motion path.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>How do we know if our robot actually achieved the motion path that we asked for?</li>
<li>In a <em>real-world</em> environment, what external factors might result in the robot <em>not</em> achieving its desired trajectory?</li>
</ol>
</div>
<p>Earlier on we also learnt about <a href="#odometry">Robot Odometry</a>, which is used by the robot to keep track of its <strong>position</strong> and <strong>orientation</strong> (aka <strong>Pose</strong>) in the environment.  As explained earlier, this is determined by a process called <em>"dead-reckoning,"</em> which is only really an approximation, but it's a fairly good one in any case, and we can use this as a feedback signal to understand if our robot is moving in the way that we expect it to.</p>
<p>We can therefore build on the techniques that we used in the <code>move_circle.py</code> exercise, and now also build in the ability to <em>subscribe</em> to a topic too and obtain some <em>real-time feedback</em>. To do this, we'll need to subscribe to the <code>/odom</code> topic, and use this to implement some basic <em>closed-loop control</em>.</p>
<h4 id="ex6"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 6: Making our Robot Follow a Square Motion Path<a class="headerlink" href="#ex6" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Make sure your <code>move_circle.py</code> node is no longer running in <strong>TERMINAL 2</strong>, stopping it with <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> if necessary.</p>
</li>
<li>
<p>Make sure <strong>TERMINAL 2</strong> is still located inside your <code>part2_navigation</code> package.</p>
</li>
<li>
<p>Navigate to the package <code>scripts</code> directory and use the Linux <code>touch</code> command to create a new file called <code>move_square.py</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>touch<span class="w"> </span>move_square.py
</code></pre></div></p>
<hr />
</li>
<li>
<p>Then make this file executable using <code>chmod</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>move_square.py
</code></pre></div></p>
<hr />
</li>
<li>
<p>Use the VS Code File Explorer to navigate to this <code>move_square.py</code> file and open it up, ready for editing.</p>
</li>
<li><a href="move_square/">There's a template here to help you with this exercise</a>. Copy and paste the template code into your new <code>move_square.py</code> file to get you started. <a name="move_square_ret"></a></li>
<li>
<p>Run the code as it is to see what happens... <a name="blank-2"></a></p>
<div class="admonition warning">
<p class="admonition-title">Fill in the Blank!</p>
<p>Something not quite working as expected? Did we <a href="../part1/publisher/#shebang">forget something very crucial</a> on <strong>the very first line</strong> of the code template?!</p>
</div>
</li>
<li>
<p>Fill in the blank as required and then adapt the code to make your robot follow a <strong>square</strong> motion path of <strong>1 x 1 meter</strong> dimensions.</p>
</li>
</ol>
<p>After following a square motion path a few times, your robot <em>should</em> return to the same location that it started from.</p>
<div class="admonition tip">
<p class="admonition-title">Advanced feature</p>
<p>Adapt the node to make the robot automatically stop once it has performed two complete loops.</p>
</div>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>In this session we've learnt how to control the velocity and position of a robot from both the command-line (using ROS command-line tools) and from ROS Nodes by publishing correctly formatted messages to the <code>/cmd_vel</code> topic.  </p>
<p>We've also learnt about <em>Odometry</em>, which is published by our robot to the <code>/odom</code> topic.  The odometry data tells us the current linear and angular velocities of our robot in relation to its 3 principal axes.  In addition to this though, it also tells us where in physical space our robot is located and oriented, which is determined based on <em>dead-reckoning</em>. </p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>What information (sensor/actuator data) is used to do this?</li>
<li>Do you see any potential limitations of this?</li>
</ol>
</div>
<p>Consider reading Chapter 11.1.3 ("Pose of Robot") in <a href="../../../about/#ebook">the ROS Robot Programming eBook that we mentioned here</a>.</p>
<p>In the final exercise we explored the development of odometry-based control to make a robot follow a <em>square</em> motion path. You will likely have observed some degree of error in this which could be due to the fact that Odometry data is determined by dead-reckoning and is therefore subject to drift and accumulated error. Consider how other factors may impact the accuracy of control too.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>How might the rate at which the odometry data is sampled play a role?</li>
<li>How quickly can your robot receive new velocity commands, and how quickly can it respond?</li>
</ol>
</div>
<p>Be aware that we did all this in simulation here too. In fact, in a real world environment, this type of navigation might be <em>less effective</em>, since things such as measurement noise and calibration errors can also have considerable impact. You will have the opportunity to experience this first hand in the labs.</p>
<p>Ultimately then, we've seen a requirement here for additional information to provide more confidence of a robot's location in its environment, in order to enhance its ability to navigate effectively and avoid crashing into things! We'll explore this further later in this course.</p>
<h3 id="backup">WSL-ROS Managed Desktop Users: Save your work!<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<p>Remember, the work you have done in the WSL-ROS environment during this session <strong>will not be preserved</strong> for future sessions or across different University machines automatically! To save the work you have done here today you should now run the following script in any idle WSL-ROS Terminal Instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>wsl_ros<span class="w"> </span>backup
</code></pre></div>
<p>This will export your home directory to your University <code>U:\</code> Drive, allowing you to restore it on another managed desktop machine the next time you fire up WSL-ROS.  </p>
<div class="footnote">
<hr />
<ol>
<li id="fn:quaternions">
<p><a href="https://automaticaddison.com/how-to-convert-a-quaternion-to-a-rotation-matrix/#What_is_a_Quaternion">Quaternions are explained very nicely here</a>, if you'd like to learn more.&#160;<a class="footnote-backref" href="#fnref:quaternions" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-09-13T13:01:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-09-13</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-08-07T15:33:30+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-07</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../part1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 1: Getting Started with ROS 2">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 1: Getting Started with ROS 2
              </div>
            </div>
          </a>
        
        
          
          <a href="../part3/" class="md-footer__link md-footer__link--next" aria-label="Next: Part 3: Beyond the Basics">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Part 3: Beyond the Basics
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br />  &copy; <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2025.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>