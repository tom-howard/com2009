
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn about an alternative way that ROS nodes can communicate across a ROS network, and the situations where this might be useful.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/com2009/course/assignment1/part4/">
      
      
        <link rel="prev" href="../part3/">
      
      
        <link rel="next" href="../part5/">
      
      
      <link rel="icon" href="../../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Part 4: Services - ROS2 Course Assignments for COM2009</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Part 4: Services - ROS2 Course Assignments for COM2009" >
      
        <meta  property="og:description"  content="Learn about an alternative way that ROS nodes can communicate across a ROS network, and the situations where this might be useful." >
      
        <meta  property="og:image"  content="https://tom-howard.github.io/com2009/assets/images/social/course/assignment1/part4.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://tom-howard.github.io/com2009/course/assignment1/part4/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Part 4: Services - ROS2 Course Assignments for COM2009" >
      
        <meta  name="twitter:description"  content="Learn about an alternative way that ROS nodes can communicate across a ROS network, and the situations where this might be useful." >
      
        <meta  name="twitter:image"  content="https://tom-howard.github.io/com2009/assets/images/social/course/assignment1/part4.png" >
      
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ROS2 Course Assignments for COM2009" class="md-header__button md-logo" aria-label="ROS2 Course Assignments for COM2009" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS2 Course Assignments for COM2009
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 4: Services
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ros/" class="md-tabs__link">
          
  
  
    
  
  ROS

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Assignments

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../waffles/" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ROS2 Course Assignments for COM2009" class="md-nav__button md-logo" aria-label="ROS2 Course Assignments for COM2009" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    ROS2 Course Assignments for COM2009
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducing the Robots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version History
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ROS
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/wsl-ros/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing WSL-ROS2 on your Own (Windows) Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing WSL-ROS2 from A University Managed Desktop Computer on Campus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/other-options/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Other Installation Options
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Other Installation Options
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/other-options/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing "docker-ros2" for Linux, Mac (and Windows)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/other-options/utm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing with UTM (on a Mac)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Using WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Using WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    University Managed Desktops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A Quick Introduction to the Linux Terminal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VS Code and WSL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignments
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Assignments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Assignment #1: An Introduction to ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 4: Services
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 4: Services
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-introduction-to-services" class="md-nav__link">
    <span class="md-ellipsis">
      An Introduction to Services
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interrogating-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Interrogating a Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interrogating a Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Using Command-line Tools to Interrogate a Service and its Interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-format-of-service-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      The Format of Service Interfaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Format of Service Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Playing the Number Game (from the Command-line)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-our-own-services" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Our Own Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Our Own Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Creating a Service Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Adapting the Number Game Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Creating a Python Service Client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-map-saver-service" class="md-nav__link">
    <span class="md-ellipsis">
      The Map Saver Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Map Saver Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Developing A Map Saver Service Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary-of-the-map-saver-service" class="md-nav__link">
    <span class="md-ellipsis">
      Summary of the Map Saver Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS2 Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5: Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6: Cameras, Machine Vision & OpenCV
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 1: Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part A (Weeks 1-6)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3_3" id="__nav_3_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_3">
            <span class="md-nav__icon md-icon"></span>
            Part A (Weeks 1-6)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 1: Velocity Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 2: Avoiding Obstacles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/part-b/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part B (Weeks 7-12)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3_4" id="__nav_3_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_4">
            <span class="md-nav__icon md-icon"></span>
            Part B (Weeks 7-12)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-b/task3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 3: Exploration & Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/part-b/task4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 4: Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with your ROS Package (in the Lab)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key Assessment Info & Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Additional Resources
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Additional Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/launch-file-args/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch File Arguments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The TUoS ROS Course Repo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../waffles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The Waffles
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching ROS (and Pairing the Laptop)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Waffle (& ROS) Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Further (Essential) Exercises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shutdown Procedures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-introduction-to-services" class="md-nav__link">
    <span class="md-ellipsis">
      An Introduction to Services
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interrogating-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Interrogating a Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interrogating a Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Using Command-line Tools to Interrogate a Service and its Interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-format-of-service-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      The Format of Service Interfaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Format of Service Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Playing the Number Game (from the Command-line)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-our-own-services" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Our Own Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Our Own Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Creating a Service Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Adapting the Number Game Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Creating a Python Service Client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-map-saver-service" class="md-nav__link">
    <span class="md-ellipsis">
      The Map Saver Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Map Saver Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Developing A Map Saver Service Client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary-of-the-map-saver-service" class="md-nav__link">
    <span class="md-ellipsis">
      Summary of the Map Saver Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS2 Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/com2009/edit/main/docs/course/assignment1/part4.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/com2009/raw/main/docs/course/assignment1/part4.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Part 4: Services</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> <strong>Exercises</strong>: 6<br />
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"/></svg></span> <strong>Estimated Completion Time</strong>: 2 hours<br />
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8c0 2.4-1 4.5-2.7 6-1.4-1.3-3.3-2-5.3-2s-3.8.7-5.3 2C5 16.5 4 14.4 4 12a8 8 0 0 1 8-8m2 1.89c-.38.01-.74.26-.9.65l-1.29 3.23-.1.23c-.71.13-1.3.6-1.57 1.26-.41 1.03.09 2.19 1.12 2.6s2.19-.09 2.6-1.12c.26-.66.14-1.42-.29-1.98l.1-.26 1.29-3.21.01-.03c.2-.51-.05-1.09-.56-1.3-.13-.05-.26-.07-.41-.07M10 6a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1M7 9a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m10 0a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1"/></svg></span> <strong>Difficulty Level</strong>: Intermediate  </p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">&para;</a></h3>
<p>In this part you'll learn about <em>Services</em>: an alternative communication method that can be used to transmit data/information or invoke actions on a ROS Network. You'll learn how this works, and why it might be useful. You'll also look at some practical applications of this.</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">&para;</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Recognise how ROS Services differ from the standard topic-based publisher-subscriber approach, and identify appropriate use-cases for this type of messaging system.</li>
<li>Identify the services that are available on a ROS network, and use ROS command-line tools to interrogate and <em>call</em> them.</li>
<li>Develop Python Service Client Nodes.</li>
<li>Invoke different services using various service-type interfaces.</li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="#ex1">Exercise 1: Using Command-line Tools to Interrogate a Service and its Interface</a></li>
<li><a href="#ex2">Exercise 2: Playing the Number Game (from the Command-line)</a></li>
<li><a href="#ex3">Exercise 3: Creating a Service Interface</a></li>
<li><a href="#ex4">Exercise 4: Adapting the Number Game Server</a></li>
<li><a href="#ex5">Exercise 5: Creating a Python Service Client</a></li>
<li><a href="#ex6">Exercise 6: Developing A Map Saver Service Client</a></li>
</ul>
<h3 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="number_game_client/">The <code>number_game_client.py</code> Node (for Exercise 5)</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p><strong>Step 1: Launch your ROS2 Environment</strong></p>
<p>If you haven't done so already, launch your ROS environment now. Having done this, you should now have access to a Linux terminal instance (aka <strong>TERMINAL 1</strong>).</p>
<p><strong>Step 2: Restore your work (WSL-ROS2 Managed Desktop Users ONLY)</strong></p>
<p>Remember that any work you do within the WSL-ROS2 Environment will not be preserved between sessions or across different University computers, so you should be backing up your work to your <code>U:\</code> drive regularly. When prompted (on first launch of WSL-ROS2 in <strong>TERMINAL 1</strong>) enter <span class="keys"><kbd class="key-y">Y</kbd><span>+</span><kbd class="key-enter">Enter</kbd></span> to restore your data<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>It looks like you already have a backup from a previous session:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  U:\wsl-ros\ros2-backup-XXX.tar.gz
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Do you want to restore this now? [y/n]
</code></pre></div>
<p><strong>Step 3: Launch VS Code</strong>  </p>
<p>It's also worth launching VS Code now. <em>WSL users</em> remember to check for this:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../../ros/figures/code-wsl-ext-on.png" width="400px" /></a></p>
</figure>
<p><strong>Step 4: Make Sure The Course Repo is Up-To-Date</strong></p>
<p>Once again, it's worth quickly checking that the Course Repo is up-to-date before you start on the Part 4 exercises. Go back to <a href="../part1/#course-repo">Part 1</a> if you haven't installed it yet (really?!) or - alternatively - <a href="../../extras/course-repo/#updating">see here for how to update</a>.</p>
<h2 id="an-introduction-to-services">An Introduction to Services<a class="headerlink" href="#an-introduction-to-services" title="Permanent link">&para;</a></h2>
<p>So far, we've learnt about ROS <em>topics</em> and the <em>message</em>-type interfaces that we use to transmit data on them. We've also learnt how individual nodes can access data on a robot by simply <em>subscribing</em> to topics that another node on the ROS network is publishing messages to. In addition to this, we know that any node can <em>publish</em> messages to any topic, which broadcasts data across the ROS network, making it available to any other node on the network that may wish to access it.</p>
<p>Another way to pass data between ROS Nodes is by using <em>Services</em>. These are based on a <em>call and response</em> type of communication:</p>
<ul>
<li>A Service <strong>Client</strong> sends a <strong>Request</strong> to a Service <strong>Server</strong>.</li>
<li>The Service <strong>Server</strong> processes that request and sends back a <strong>Response</strong>.</li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="The difference between topic-based messaging and the ROS Service protocol" src="topic_vs_service.png" width="600px" /></a></p>
</figure>
<p>This is a bit like a transaction: one node requests something, and another node fulfils that request and responds. This is good for <strong>quick, short duration tasks</strong>, e.g.:</p>
<ol>
<li>Turning a device on or off.</li>
<li>Grabbing some data and saving it to a file (a map for example).</li>
<li>Performing a calculation and returning a result.</li>
<li>Making a sound<sup id="fnref:tb3_sound"><a class="footnote-ref" href="#fn:tb3_sound">2</a></sup>.</li>
</ol>
<p>A single service can have many clients, but you can only have a <em>single</em> Server providing that particular service at any one time.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="service_clients.png" /></a>
  </p>
<figcaption>Multiple Clients to a single Service Server</figcaption>
</figure>
<p>Let's see how this all works in practice now, by playing a number game! We don't need a simulation up and running for this one, so in <strong>TERMINAL 1</strong> use the following command to launch the <em>Guess the Number</em> Service: </p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>tuos_examples<span class="w"> </span>number_game.py
</code></pre></div></p>
<p>Having launched the service successfully, you should be presented with the following:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>[INFO] [#####] [number_game_service]: The &#39;/guess_the_number&#39; service is active.
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>[INFO] [#####] [number_game_service]: A secret number has been set... Game on!
</code></pre></div>
<hr />
<p>We need to interrogate this now, in order to work out how to play the game...</p>
<h2 id="interrogating-a-service">Interrogating a Service<a class="headerlink" href="#interrogating-a-service" title="Permanent link">&para;</a></h2>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 1: Using Command-line Tools to Interrogate a Service and its Interface<a class="headerlink" href="#ex1" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Open up a new terminal instance (<strong>TERMINAL 2</strong>) and use the <code>ros2 service</code> command to list all active ROS services:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ros2<span class="w"> </span>service<span class="w"> </span>list
</code></pre></div></p>
<hr />
<p>There'll be a few items in this list, most of them with the prefix: <code>/number_game_service</code>. This is the name of the <em>node</em> that is providing the service (i.e. the <strong>Server</strong>) and these items are all automatically generated by ROS. What we're really interested in is the service itself, which should be listed as <code>/guess_the_number</code>. </p>
</li>
<li>
<p>Next, we need to find the <em>interface type</em> used by this service, which we can do a couple of ways:</p>
<hr />
<p><strong>TERMINAL 2:</strong></p>
<ol>
<li>
<p>Use the <code>type</code> sub-command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ros2 service type /guess_the_number
</code></pre></div>
</li>
<li>
<p>Use the <code>list</code> sub-command again, but with the <code>-t</code> flag:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ros2<span class="w"> </span>service<span class="w"> </span>list<span class="w"> </span>-t
</code></pre></div>
<p>The latter will provide the same list of services as before, but each one will now have its interface type provided alongside it.</p>
</li>
</ol>
<hr />
</li>
<li>
<p>Regardless of the method that you used above, you should have discovered that the interface type used by the <code>/guess_the_number</code> service is:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>tuos_interfaces/srv/NumberGame
</code></pre></div>
<p>Notice how (<a href="../part1/#msg-interface-struct">much like with message interfaces used by <em>topics</em></a>), there are three fields to this type definition:</p>
<ol>
<li><code>tuos_interfaces</code>: the name of the ROS package that this interface belongs to.</li>
<li><code>srv</code>: that this is a <em>service</em> interface, the second interface type we've covered now (we'll learn about the third and final one in Part 5).</li>
<li><code>NumberGame</code>: the data structure.</li>
</ol>
<p>We need to know the data structure in order to make a call to the service, so let's identify this next.</p>
</li>
<li>
<p>We can use the <code>ros2 interface list</code> command to list <em>all</em> interface types available to us on our ROS system, but this will provide us with a long list!</p>
<hr />
<p><strong>TERMINAL 2:</strong></p>
<ol>
<li>
<p>We can use the <code>-m</code> flag to filter for <em>message</em> interfaces, or the <code>-s</code> flag to filter for <em>service</em> interfaces. Try the latter:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>list<span class="w"> </span>-s
</code></pre></div>
<p><a name="grep"></a></p>
</li>
<li>
<p>Still quite a lot there, right!? Let's filter this further with <a href="https://en.wikipedia.org/wiki/Grep" target="_blank">Grep</a> to identify <em>only</em> interfaces that belong to the <code>tuos_interfaces</code> package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>list<span class="w"> </span>-s<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>tuos_interfaces
</code></pre></div>
<p>Hopefully, the <code>srv/NumberGame</code> interface is now listed.</p>
</li>
<li>
<p>Use the <code>show</code> sub-command to <em>show</em> the message structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>tuos_interfaces/srv/NumberGame
</code></pre></div>
</li>
</ol>
<hr />
<p>The interface structure should be shown as follows:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>int32 guess
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>---
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>int32 guesses
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>string hint
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>bool success
</code></pre></div>
</li>
</ol>
<h2 id="the-format-of-service-interfaces">The Format of Service Interfaces<a class="headerlink" href="#the-format-of-service-interfaces" title="Permanent link">&para;</a></h2>
<p>Service interfaces have two parts to them, separated by three hyphens (<code>---</code>). Above the separator is the Service <strong>Request</strong>, and below it is the Service <strong>Response</strong>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>int32 guess      &lt;-- Request
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>---
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>int32 guesses    &lt;-- Response (1 of 3)
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>string hint      &lt;-- Response (2 of 3)
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>bool success     &lt;-- Response (3 of 3)
</code></pre></div>
<p>In order to <em>Call</em> a service, we need to provide data to it in the format specified in the <strong>Request</strong> section of the interface. A service <em>Server</em> will then send data back to the caller in the format specified in the <strong>Response</strong> section of the interface.</p>
<p>The <code>tuos_interfaces/srv/NumberGame</code> service interface has only <strong>one</strong> request parameter:</p>
<ol>
<li><code>guess</code>: a <code>int32</code> (32-bit integer)<br />
    ...which is the only thing we need to send to the <code>/number_game_service</code> Service Server in order to call it.</li>
</ol>
<p>There are then <strong>three</strong> response parameters:</p>
<ol>
<li>A <em>32-bit integer</em> called <code>guesses</code></li>
<li>A text <em>string</em> called <code>hint</code>  </li>
<li>
<p>A <em>boolean</em> flag called <code>success</code></p>
<p>...all of which will be returned by the server, once it has processed our request.</p>
</li>
</ol>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 2: Playing the Number Game (from the Command-line)<a class="headerlink" href="#ex2" title="Permanent link">&para;</a></h4>
<p>We're now ready to make a call to the service, and we can do this using the <code>ros2 service</code> command again (from <strong>TERMINAL 2</strong>):</p>
<ol>
<li>
<p>To start, let's send an initial guess of <code>0</code> and see what happens:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/guess_the_number<span class="w"> </span>tuos_interfaces/srv/NumberGame<span class="w"> </span><span class="s2">&quot;{guess: 0}&quot;</span>
</code></pre></div>
<p>The request will be echoed back to us, followed by a response, which will likely look something like this, and which shows us the value of the three response parameters that we identified above:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>response:
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>tuos_interfaces.srv.NumberGame_Response(guesses=1, hint=&#39;Higher&#39;, success=False)
</code></pre></div>
<ol>
<li><code>guesses</code>: tells us how many times we've tried to guess the number in total (just once so far)</li>
<li><code>hint</code>: tells us if we should go "higher" or "lower" on our next guess in order to get closer to the <em>secret number</em></li>
<li><code>success</code>: tells us if we guessed the right number or not (unlikely on the first attempt!)</li>
</ol>
</li>
<li>
<p>Make another service call, this time changing the value of your <code>guess</code>, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/guess_the_number<span class="w"> </span>tuos_interfaces/srv/NumberGame<span class="w"> </span><span class="s2">&quot;{guess: 10}&quot;</span>
</code></pre></div>
</li>
<li>
<p>Try making a guess of 500 next.</p>
<p>The service should respond with the hint <code>'Error'</code> now. Have a look back in <strong>TERMINAL 1</strong> (where the Server is running) to get more information on this.</p>
</li>
<li>
<p>Keep going until you guess the magic number, how many guesses does it take you?! </p>
</li>
<li>
<p>Stop the server, by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 1</strong>.</p>
</li>
</ol>
<h2 id="creating-our-own-services">Creating Our Own Services<a class="headerlink" href="#creating-our-own-services" title="Permanent link">&para;</a></h2>
<p>Over the next three exercises, we'll learn how to create a service interface of our own, and build a Server and Client (in Python) that use this.</p>
<p>First though, we need to create a new package, so follow the same procedure as you have in the previous parts of this course to create one called <code>part4_services</code>.</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>./create_pkg.sh part4_services
</code></pre></div>
<hr />
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 3: Creating a Service Interface<a class="headerlink" href="#ex3" title="Permanent link">&para;</a></h4>
<p>Let's create a service interface now which has a <em>similar</em> structure to the one used by the <code>/guess_the_number</code> service, but this time with <em>two</em> request parameters, rather than just one...</p>
<ol>
<li>
<p>In <strong>TERMINAL 1</strong>, navigate into the root of your <code>part4_services</code> package directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/part4_services/
</code></pre></div>
</li>
<li>
<p>Create a new directory there called <code>srv</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>mkdir<span class="w"> </span>srv
</code></pre></div>
</li>
<li>
<p>Create a new file in this directory called <code>MyNumberGame.srv</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>touch<span class="w"> </span>srv/MyNumberGame.srv
</code></pre></div>
<p>In here is where we will define the structure of our own <code>MyNumberGame</code> service interface.</p>
</li>
<li>
<p>Open up this file in VS Code, enter the following content and save the file:</p>
<div class="highlight"><span class="filename">MyNumberGame.srv</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>int32 guess
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>bool cheat
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>---
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>int32 num_guesses
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>string hint
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>bool correct
</code></pre></div>
<p>The <strong>Request</strong> will therefore have two fields now:</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field Name</th>
<th style="text-align: center;">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>guess</code></td>
<td style="text-align: center;"><code>int32</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>cheat</code></td>
<td style="text-align: center;"><code>bool</code></td>
</tr>
</tbody>
</table>
<p></center></p>
</li>
<li>
<p>The rest of the process now is very similar to creating a <em>message</em> interface, <a href="../part1/#ex7">like we did in Part 1</a>. </p>
<p>First, we need to declare the interface in our <code>CMakeLists.txt</code> file, by adding the following above the <code>ament_package()</code> line:</p>
<div class="highlight"><span class="filename">part4_services/CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>find_package(rosidl_default_generators REQUIRED)
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>rosidl_generate_interfaces(${PROJECT_NAME}
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>  &quot;srv/MyNumberGame.srv&quot; 
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>)
</code></pre></div>
</li>
<li>
<p>Next, we need to modify the <code>package.xml</code> file. Add the following lines to this one, just above the <code class="highlight"><span class="nt">&lt;export&gt;</span></code> line:</p>
<div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&lt;buildtool_depend&gt;</span>rosidl_default_generators<span class="nt">&lt;/buildtool_depend&gt;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nt">&lt;exec_depend&gt;</span>rosidl_default_runtime<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">&lt;member_of_group&gt;</span>rosidl_interface_packages<span class="nt">&lt;/member_of_group&gt;</span>
</code></pre></div>
</li>
<li>
<p>And finally, we use Colcon to generate the necessary source code for the service interface:</p>
<ol>
<li>
<p>Navigate to the root of the ROS2 Workspace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div>
</li>
<li>
<p>Run <code>colcon build</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part4_services<span class="w"> </span>--symlink-install<span class="w"> </span>
</code></pre></div>
</li>
<li>
<p>And re-source the <code>.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Let's verify that this worked, using the <code>ros2</code> CLI (the same way as we did earlier when interrogating <code>tuos_interfaces/srv/NumberGame</code>):</p>
<ol>
<li>
<p>First, <em>list</em> all the ROS service interfaces that are available on the system (<code>-s</code> to filter for <em>service</em> interface types remember!):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>list<span class="w"> </span>-s
</code></pre></div>
<p>Scroll through this list and see if you can find <code>part4_services/srv/MyNumberGame</code> (or, <a href="#grep">use <code>grep</code> again</a>).</p>
</li>
<li>
<p>If it's there, use the <code>show</code> sub-command to <em>show</em> the data structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>part4_services/srv/MyNumberGame
</code></pre></div>
</li>
</ol>
<p>Does it match with the definition in our <code>MyNumberGame.srv</code> file?</p>
</li>
</ol>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 4: Adapting the Number Game Server<a class="headerlink" href="#ex4" title="Permanent link">&para;</a></h4>
<p>We're going to take a copy of the <code>tuos_examples/number_game.py</code> server node now, and adapt it to use the service interface that we created above.</p>
<ol>
<li>
<p>In <strong>TERMINAL 1</strong> still, navigate into the <code>part4_services/scripts</code> directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/part4_services/scripts/
</code></pre></div>
</li>
<li>
<p>Copy the <code>number_game.py</code> script from the course repo into here, renaming it to <code>my_number_game.py</code> at the same time:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>cp<span class="w"> </span>../../tuos_ros/tuos_examples/scripts/number_game.py<span class="w"> </span>./my_number_game.py
</code></pre></div>
<p>This file should already have <em>execute</em> permissions, but <a href="../part1/#chmod">it's always worth checking</a>...</p>
</li>
<li>
<p>Declare this as a package executable by going back to the <code>CMakeLists.txt</code> file, and adding <code>my_number_game.py</code> below <code>minimal_node.py</code> (or just replacing <code>minimal_node.py</code> entirely):</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a># Install Python executables
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>install(PROGRAMS
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>  scripts/my_number_game.py
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>)
</code></pre></div>
</li>
<li>
<p>Build and re-source now: <a name="colcon-build-steps"></a></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part4_services<span class="w"> </span>--symlink-install
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc<span class="w"> </span>
</code></pre></div></p>
</li>
<li>
<p>Now, let's look at the code, and see what needs to be adapted:</p>
<ol>
<li>
<p>Open up the <code>my_number_game.py</code> node in VS Code and review it.</p>
</li>
<li>
<p>As it stands, the node imports the <code>NumberGame</code> service interface from <code>tuos_interfaces</code>, so you'll need to change this to use the interface from our own package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">part4_services.srv</span><span class="w"> </span><span class="kn">import</span> <span class="n">MyNumberGame</span>
</code></pre></div>
<p>You'll also need to change the <code>srv_type</code> definition, when the service is created in the <code class="highlight"><span class="fm">__init__</span><span class="p">()</span></code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">srv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_service</span><span class="p">(</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    <span class="n">srv_type</span><span class="o">=</span><span class="n">MyNumberGame</span><span class="p">,</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>    <span class="n">srv_name</span><span class="o">=</span><span class="s1">&#39;guess_the_number&#39;</span><span class="p">,</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>    <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">srv_callback</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>Everything that this service <em>does</em> (when a <strong>Request</strong> is sent to it), is contained within the <code>srv_callback()</code> method. </p>
<p>In here, <code>request</code> parameters are processed, <code>response</code> parameters are defined and the overall <code>response</code> is returned once the callback tasks have been completed.</p>
</li>
<li>
<p>You may have noticed that when we created our <code>MyNumberGame</code> interface in the previous exercise, the <strong>Response</strong> parameters were the same as the originals from Exercise 1 &amp; 2, <em>except</em> that some of their names were changed slightly!</p>
<p>Work through the <code>srv_callback()</code> method and make sure that all <code>response</code> attributes are renamed to match the new names that we've given them in <code>MyNumberGame.srv</code>. </p>
</li>
<li>
<p>Remember that our <code>MyNumberGame</code> interface has an additional <strong>Request</strong> parameter too: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>bool cheat
</code></pre></div>
<p>... i.e. a <em>boolean</em> flag with the attribute name <code>cheat</code>.</p>
<p>Adapt the <code>srv_callback()</code> method further now to read this value as well. </p>
<ul>
<li>
<p>If (when a <strong>request</strong> is made to the server) the value of <code>cheat</code> is <code>True</code> the hint that the server returns should contain the actual secret number! E.g.:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>hint=&#39;The answer is 67!&#39;
</code></pre></div>
</li>
<li>
<p>In such situations, the value of <code>response.num_guesses</code> should still go up by one, and the <code>correct</code> flag should still return <code>False</code>.</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Once you've adapted the node, test it out by running it:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part4_services<span class="w"> </span>my_number_game.py
</code></pre></div></p>
<hr />
<p>You should then be able to make calls to this from <strong>TERMINAL 2</strong> using the <code>ros2 service call</code> sub-command, as we did in <a href="#ex2">Exercise 2</a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>There are <strong>two</strong> request parameters now, so when sending a request from the command-line <strong>both</strong> need to be supplied. Do this by including them both within the braces (<code>{}</code>) and separated with a comma, e.g.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/guess_the_number<span class="w"> </span>part4_services/srv/MyNumberGame<span class="w"> </span><span class="s2">&quot;{guess: X, cheat: Y}&quot;</span><span class="w"> </span>
</code></pre></div>
</div>
</li>
</ol>
<h4 id="ex5"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 5: Creating a Python Service Client<a class="headerlink" href="#ex5" title="Permanent link">&para;</a></h4>
<p>So far we've been making service calls from the command-line, but we can also call services from within Python Nodes. When a node <em>calls</em> (i.e. <em>requests</em>) a service, it becomes a Service <em>"Client"</em>.</p>
<ol>
<li>
<p>Make sure your <code>my_number_game.py</code> node is still active in <strong>TERMINAL 1</strong> for this exercise.</p>
</li>
<li>
<p>In <strong>TERMINAL 2</strong>, create a new file in the <code>part4_services/scripts</code> directory called <code>number_game_client.py</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>touch<span class="w"> </span>~/ros2_ws/src/part4_services/scripts/number_game_client.py
</code></pre></div>
</li>
<li>
<p><a href="../part1/#chmod">Make this executable (with <code>chmod</code>)</a>.</p>
</li>
<li>
<p>Add this to your package's <em>Python executables</em> list in <code>CMakeLists.txt</code>:</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a># Install Python executables
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>install(PROGRAMS
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>  scripts/my_number_game.py
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>  scripts/number_game_client.py
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>)
</code></pre></div>
</li>
<li>
<p>Re-build your package (as before), remembering that there are <a href="#colcon-build-steps">three steps to this</a>:</p>
<ol>
<li>Navigate to the <strong>root</strong> of the ROS2 workspace,</li>
<li>Run <code>colcon build</code> (with the necessary additional arguments), </li>
<li>Re-source your <code>~/.bashrc</code>.</li>
</ol>
<p><a name="ex_srv_cli_ret"></a></p>
</li>
<li>
<p>Now, open up the <code>number_game_client.py</code> file in VS Code. <strong><a href="number_game_client/">Have a look at <ins>the code here</ins>, review it (including all the annotations), then copy and paste it and save the file</a></strong>.</p>
</li>
<li>
<p>You should now be able to run the code with <code>ros2 run</code>. To begin with, run it without supplying any additional command-line arguments:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part4_services<span class="w"> </span>number_game_client.py
</code></pre></div></p>
<hr />
<p>You'll probably then get an output like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>[INFO] [#####] [number_game_client]: Sending the request:
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a> - guess: 0
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a> - cheat: False
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>   Awaiting response...
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>[INFO] [#####] [number_game_client]: The server has responded with:
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a> - Incorrect guess :(
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a> - Number of attempts so far: 1
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a> - A hint: &#39;Higher&#39;.
</code></pre></div>
<p>Notice how the request parameters <code>guess</code> and <code>cheat</code> have defaulted to <code>0</code> and <code>False</code> respectively?</p>
</li>
<li>
<p>Supply a guess now, using our node's CLI:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part4_services<span class="w"> </span>number_game_client.py<span class="w"> </span>--guess<span class="w"> </span>GUESS
</code></pre></div></p>
<hr />
<p>... replacing <code>GUESS</code> with an actual number!</p>
</li>
<li>
<p>Have a go at cheating now too:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part4_services<span class="w"> </span>number_game_client.py<span class="w"> </span>--cheat
</code></pre></div></p>
<hr />
<p>... notice how we only need to supply the <code>--cheat</code> flag, no actual value is required.</p>
</li>
</ol>
<h2 id="the-map-saver-service">The Map Saver Service<a class="headerlink" href="#the-map-saver-service" title="Permanent link">&para;</a></h2>
<p>Clearly the examples that we've been working with here so far have been fairly trivial: it's unlikely that you'll <em>ever</em> need to program a robot to play the number game! The aim however has been to illustrate how ROS Services work, and how to develop your own. </p>
<p>One application that you <em>might</em> find useful however is <em>map saving</em>. In Part 3 we learnt about SLAM, where we drove a robot around in an environment while SLAM algorithms were working in the background to generate a map of the world using data from the robot's LiDAR sensor and its odometry system:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../part3/slam_steps.png" width="500px" /></a></p>
</figure>
<p>Having mapped out the environment, we called up a node called <code>map_saver_cli</code> from the <code>nav2_map_server</code> package, to save a copy of that map to a file:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>nav2_map_server<span class="w"> </span>map_saver_cli<span class="w"> </span>-f<span class="w"> </span>MAP_NAME
</code></pre></div>
<p>... wouldn't it be nice if there was a way to be able to do this <em>programmatically</em> (i.e. from within a Python node, for example) rather than having to run the above command manually? Well, there is a way, and guess what - it involves <em>Services</em>!</p>
<h4 id="ex6"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 6: Developing A Map Saver Service Client<a class="headerlink" href="#ex6" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Make sure everything in <strong>TERMINALS 1</strong> and <strong>2</strong> from the previous exercises are closed down now.</p>
</li>
<li>
<p>In <strong>TERMINAL 1</strong>, let's fire up the <em>Nav World</em> again, like we did in Part 3:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_simulations<span class="w"> </span>nav_world.launch.py
</code></pre></div></p>
<hr />
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../part3/nav_world.jpg" width="500px" /></a>
</figure></p>
</li>
<li>
<p>In <strong>TERMINAL 2</strong>, let's also fire up <em>Cartographer</em> again (the SLAM algorithms):</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_simulations<span class="w"> </span>cartographer.launch.py
</code></pre></div></p>
<hr />
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../part3/cartographer_rviz.png" width="500px" /></a>
</figure></p>
</li>
<li>
<p>Open up <em>another</em> terminal instance now (<strong>TERMINAL 3</strong>), and use this one to fire up the <em>Map Saver Service</em> (wouldn't it be nice if we could <a href="../part3/#ex2">launch all of these launch files at once</a>?!):</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>nav2_map_server<span class="w"> </span>map_saver_server.launch.py
</code></pre></div></p>
<hr />
<p>This will add a number of <code>/map_saver</code> services to our ROS network.</p>
</li>
<li>
<p>Use a <code>ros2 service</code> sub-command to identify all the <code>/map_saver</code> services (like we did in <a href="#ex1">Exercise 1</a>).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Do you see an item in this list that could be related to saving a map? (It has a <code>/map_saver</code> prefix<sup id="fnref:save-map"><a class="footnote-ref" href="#fn:save-map">3</a></sup>!)</p>
</div>
</li>
<li>
<p>Use another <code>ros2 service</code> sub-command to determine the type of interface used by this service (again, like we did in Exercise 1).</p>
</li>
<li>
<p>Next, use a <code>ros2 interface</code> command to discover the structure of this service interface.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>How many <strong>Request</strong> parameters does this interface have?</li>
<li>How many <strong>Response</strong> parameters are there too?<sup id="fnref:save-map-interface"><a class="footnote-ref" href="#fn:save-map-interface">4</a></sup></li>
<li>What are their data types?</li>
</ol>
</div>
</li>
<li>
<p><strong>Develop a Python Service Client to make calls to this service</strong>:</p>
<ol>
<li>
<p>Create a new Node in your <code>part4_services</code> package called <code>map_saver_client.py</code> for this. </p>
<p>Things to remember when doing this:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Create this in your <code>part4_services/scripts</code> directory.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure it has <em>execute</em> permissions.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Declare it as a package executable in your <code>CMakeLists.txt</code>.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Re-build your package with <code>colcon</code>, making sure you follow <a href="#colcon-build-steps">the full <strong>three-step</strong> process</a> </li>
</ul>
</li>
<li>
<p>Use <a href="number_game_client/">the <code>number_game_client.py</code> Node from Exercise 5</a> as a starting point when building your new <code>map_saver_client.py</code> node... all the same principals will apply here, you are just applying them to a different service (and therefore you need to account for a different service interface).</p>
</li>
<li>
<p>Use <code>argparse</code> again to build a CLI for your <code>map_saver_client.py</code> node.</p>
<p>In this case, your CLI should only need one argument though (where, in <code>number_game_client.py</code> there were two). This should be used to pass in a filename for a map, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part4_services<span class="w"> </span>map_saver_client.py<span class="w"> </span>--map-file<span class="w"> </span>my_amazing_map
</code></pre></div>
<p>You should ensure that this argument is optional though, i.e. if the argument isn't provided when your node is called, then a default value is applied instead.</p>
</li>
<li>
<p>When constructing service requests, consider the following tips:</p>
<ol>
<li>The SLAM map data (as generated by Cartographer) is published to a topic called <code>/map</code>. </li>
<li>
<p>When providing a name for the map file:</p>
<ul>
<li>You don't need to include a file extension</li>
<li>
<p>File names are interpreted relative to your home directory, so:</p>
<p><code>my_amazing_map</code> would result in a map file at <code>~/my_amazing_map.yaml</code></p>
<p><code>my/amazing/map</code> would result in a map file at <code>~/my/amazing/map.yaml</code> (assuming the directory structure already exists!)</p>
</li>
</ul>
</li>
<li>
<p>For further guidance <a href="https://github.com/ros-navigation/navigation2/blob/main/nav2_map_server/README.md#services" target="_blank">see here for a usage example</a>.</p>
</li>
<li>The server will apply <a href="https://docs.nav2.org/configuration/packages/configuring-map-server.html" target="_blank">its own defaults to certain parameters</a>, if they aren't set in the <strong>request</strong>.</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="summary-of-the-map-saver-service">Summary of the Map Saver Service<a class="headerlink" href="#summary-of-the-map-saver-service" title="Permanent link">&para;</a></h3>
<p><a href="../part3/#map-saver-cli">Back in Part 3</a> we saved our SLAM map once via a command-line call after we had <em>fully explored and mapped out the environment</em>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>nav2_map_server<span class="w"> </span>map_saver_cli<span class="w"> </span>-f<span class="w"> </span>MAP_NAME
</code></pre></div>
<p>... which resulted in something like:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../part3/slam_map.png" width="300px" /></a>
  </p>
<figcaption>The <code>MAP_NAME.pgm</code> file</figcaption>
</figure>
<p>In real-world tasks however (i.e. tasks that you might need to complete in <a href="../../assignment2/">Assignment #2</a> for example), your robot might be exploring an environment <em>autonomously</em>, and you don't necessarily know when the full environment has been explored, nor are you always going to be there to run the <code>map_saver_cli</code> node manually! You might therefore want to program your robot with the ability to save a map <em>incrementally</em> and <em>periodically</em> as more and more of the environment is explored.</p>
<p>The process that we explored in the previous exercise allows you to do just that! In the example, our client node was programmed to make only one request to the server and then stop. It <em>could</em> however be programmed to make regular service requests (say, once every 5 or 10 seconds) in order to continuously update its map as the robot explores further and further.</p>
<p>Think about how you might adapt the <code>map_saver_client.py</code> node to achieve this, drawing upon other exercises that you have worked through in previous parts of this course.  </p>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>In Part 4 we've learnt about ROS Services and why they might be useful for robot applications:</p>
<ul>
<li>Services differ from standard topic-based communication methods in ROS in that they are a <em>call and response</em> type of communication, taking place between one node and another.  </li>
<li>Typically, a service <em>Caller</em> will <strong>request</strong> a service, and then wait for a <strong>response</strong> (although it is possible to do other things in the meantime).</li>
<li>In general however, Services are useful for controlling <em>quick</em>, <em>short-duration</em> tasks or <em>calculations</em>.</li>
</ul>
<h3 id="backup">WSL-ROS2 Managed Desktop Users: Save your work!<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<p>Remember, to save the work you have done in WSL-ROS2 during this session so that you can restore it on a different machine at a later date. Run the following script in any idle WSL-ROS2 Terminal Instance now:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>wsl_ros<span class="w"> </span>backup
</code></pre></div>
<p>You'll then be able to restore it to a fresh WSL-ROS2 environment next time you fire one up (<code>wsl_ros restore</code>).  </p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Remember: you can also use the <code>wsl_ros restore</code> command at any time.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:tb3_sound">
<p>On the real Waffles, there's a service called <code>/sound</code>. Have a look at this next time you're in the lab... Once you've worked through the whole of Part 4 you'll know exactly how to interrogate this service and leverage the functionality that it provides!&#160;<a class="footnote-backref" href="#fnref:tb3_sound" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:save-map">
<p>There should be one in the list called <code>/map_saver/save_map</code>&#160;<a class="footnote-backref" href="#fnref:save-map" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:save-map-interface">
<p>The <code>nav2_msgs/srv/SaveMap</code> Service Interface has <strong>6</strong> Requests (<code>map_topic</code>, <code>map_url</code>, <code>image_format</code>, <code>map_mode</code>, <code>free_thresh</code>, <code>occupied_thresh</code>) and <strong>1</strong> Response (<code>result</code>).&#160;<a class="footnote-backref" href="#fnref:save-map-interface" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="March 10, 2025 23:43:14"><span class="timeago" datetime="2025-03-10T23:43:14+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="March 10, 2025 23:43:14">2025-03-10</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 26, 2025 16:39:01"><span class="timeago" datetime="2025-01-26T16:39:01+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 26, 2025 16:39:01">2025-01-26</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../part3/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 3: Beyond the Basics">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 3: Beyond the Basics
              </div>
            </div>
          </a>
        
        
          
          <a href="../part5/" class="md-footer__link md-footer__link--next" aria-label="Next: Part 5: Actions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Part 5: Actions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br />  &copy; <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2025.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>