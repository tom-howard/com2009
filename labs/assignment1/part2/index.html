
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="In this session you'll learn about Odometry data, which informs us of a robot's position in an environment. You'll also learn how to control a ROS robot's velocity (and thus its position) using both open and closed-loop control methods.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/com2009/labs/assignment1/part2/">
      
      
        <link rel="prev" href="../part1/">
      
      
        <link rel="next" href="../../assignment2/">
      
      
      <link rel="icon" href="../../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Part 2: Odometry & Navigation - COM2009: ROS2 Labs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-F7SQFPV0T8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-F7SQFPV0T8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-F7SQFPV0T8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  This site is currently under construction and will be ready by February 2025.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="COM2009: ROS2 Labs" class="md-header__button md-logo" aria-label="COM2009: ROS2 Labs" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            COM2009: ROS2 Labs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 2: Odometry & Navigation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ros/" class="md-tabs__link">
          
  
    
  
  Installing ROS

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  The Labs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../waffles/" class="md-tabs__link">
          
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../extras/" class="md-tabs__link">
          
  
    
  
  ROS Extras

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="COM2009: ROS2 Labs" class="md-nav__button md-logo" aria-label="COM2009: ROS2 Labs" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    COM2009: ROS2 Labs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/com2009" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/com2009
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../about/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    About
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Installing ROS
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installing ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    The Labs
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            The Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Assignment #1: An Introduction to ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#position-and-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Position and Velocity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Position and Velocity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principal-axes" class="md-nav__link">
    <span class="md-ellipsis">
      Principal Axes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros-velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      ROS Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Odometry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      What is Odometry?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is Odometry?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twist" class="md-nav__link">
    <span class="md-ellipsis">
      Twist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python node to process Odometry data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-navigation-open-loop-velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Velocity Control from a Terminal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python node to make the robot move in a circle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../assignment2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../waffles/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    The Waffles
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../extras/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ROS Extras
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ROS Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#position-and-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Position and Velocity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Position and Velocity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principal-axes" class="md-nav__link">
    <span class="md-ellipsis">
      Principal Axes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ros-velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      ROS Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Odometry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      What is Odometry?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is Odometry?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twist" class="md-nav__link">
    <span class="md-ellipsis">
      Twist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python node to process Odometry data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-navigation-open-loop-velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Velocity Control from a Terminal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python node to make the robot move in a circle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/tom-howard/com2009/edit/main/docs/labs/assignment1/part2.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/com2009/raw/main/docs/labs/assignment1/part2.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Part 2: Odometry & Navigation</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> <strong>Exercises</strong>: X<br />
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"/></svg></span> <strong>Estimated Completion Time</strong>: Y hours</p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">&para;</a></h3>
<p>In Part 2 you will learn how to control a ROS robot's <strong>position</strong> and <strong>velocity</strong> from both the command line and through ROS Nodes. You will also learn how to interpret the data that allows us to monitor a robot's position in its physical environment (odometry).  The things you will learn here form the basis for all robot navigation in ROS, from simple open-loop methods to more advanced closed-loop control (both of which you will explore).</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">&para;</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Interpret the Odometry data published by a ROS Robot and identify the parts of these messages that are relevant to a 2-wheeled differential drive robot (such as the TurtleBot3).</li>
<li>Develop Python nodes to obtain Odometry messages from an active ROS network and <em>translate</em> them to provide useful information about a robot's <em>pose</em> in a convenient, human-readable way.</li>
<li>Implement <em>open-loop velocity control</em> of a robot using ROS command-line tools.</li>
<li>Develop Python nodes that use open-loop velocity control methods to make a robot follow a pre-defined motion path.</li>
<li>Combine both publisher <em>&amp;</em> subscriber communication methods into a single Python node to implement closed-loop (odometry-based) velocity control of a robot.</li>
<li>Explain the limitations of Odometry-based motion control methods. </li>
</ol>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>TODO:</p>
<p><strong>Step 1: Launch your ROS Environment</strong></p>
<p>If you haven't done so already, launch your ROS environment now:</p>
<ol>
<li>OPTION 1</li>
<li>OPTION 2</li>
<li>etc...</li>
</ol>
<p>You should now have access to ROS via a Linux terminal instance. We'll refer to this terminal instance as <strong>TERMINAL 1</strong>.</p>
<p><strong>Step 2: Make Sure The Course Repo is Up-To-Date</strong></p>
<p><a name="course-repo"></a></p>
<p>In Part 1 you should have <a href="../part1/#course-repo">downloaded and installed The Course Repo</a> into your ROS environment. If you haven't done this yet then go back and do it now. If you <em>have</em> already done it, then it's worth just making sure it's all up-to-date, so run the following command now to do so:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div></p>
<p>Then build with Colcon: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build
</code></pre></div>
<p>And finally, re-source your environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<hr />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have any other terminal instances open, then you'll need run <code>source ~/.bashrc</code> in these too, in order for any changes made by the Colcon build process to propagate through to these as well.</p>
</div>
<p><strong>Step 3: Launch a Waffle Simulation</strong></p>
<p>In <strong>TERMINAL 1</strong> enter the following command to launch a simulation of a TurtleBot3 Waffle in an empty world:  </p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div></p>
<hr />
<p>A Gazebo simulation window should open and within this you should see a TurtleBot3 Waffle in empty space:</p>
<figure>
<p><img alt="" src="../../../images/gz/waffle_empty_world.svg" width="800" /></p>
</figure>
<p align="center"><strong><em>You're all set up and ready to go!</em></strong></p>

<h2 id="position-and-velocity">Position and Velocity<a class="headerlink" href="#position-and-velocity" title="Permanent link">&para;</a></h2>
<p>Two types of <strong>Velocity Command</strong> can be issued to any ROS Robot to make it move (and thus change its <em>position</em>):</p>
<ul>
<li><strong>Linear</strong> Velocity: The velocity at which the robot moves <em>forwards</em> or <em>backwards</em> in one of its principal axes.</li>
<li><strong>Angular</strong> Velocity: The velocity at which the robot <em>rotates</em> about one of its principal axes.</li>
</ul>
<h3 id="principal-axes">Principal Axes<a class="headerlink" href="#principal-axes" title="Permanent link">&para;</a></h3>
<p>The motion (i.e. the velocity) of any mobile robot can be defined in terms of <strong>three</strong> principal axes: <code>X</code>, <code>Y</code> and <code>Z</code>. In the context of our TurtleBot3 Waffle, these axes (and the motion about them) are as follows:</p>
<figure>
<p><img alt="" src="../../../images/waffle/principal_axes.svg" width="800" /></p>
</figure>
<p>In theory then, a robot can move linearly or angularly about <em>any</em> of these three axes, as shown by the arrows in the figure. That's six <em>Degrees of Freedom</em> (DOFs) in total, achieved based on a robot's design and the actuators it is equipped with. </p>
<p>Our TurtleBot3 Waffles, however, only have two motors, so they don't actually have six DOFs! These two motors can be controlled independently, which is known as a <em>"differential drive"</em> configuration, and ultimately provides it with a total of <strong>two degrees of freedom</strong> in total, as illustrated below.</p>
<figure>
<p><img alt="" src="../../../images/waffle/velocities.svg" width="800" /></p>
</figure>
<p>It can therefore only move <strong>linearly</strong> in the <strong>x</strong>-axis (<em>Forwards/Backwards</em>) and <strong>angularly</strong> in the <strong>z</strong>-axis (<em>Yaw</em>).</p>
<p>It's also worth noting (while we're on the subject of motion) that our TurtleBot3 Waffles have <strong>maximum velocity limits</strong>:</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Velocity Component</th>
<th style="text-align: center;">Upper Limit</th>
<th style="text-align: left;">Units</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><em>Linear</em></td>
<td style="text-align: center;">0.26</td>
<td style="text-align: left;">m/s</td>
</tr>
<tr>
<td style="text-align: left;"><em>Angular</em></td>
<td style="text-align: center;">1.82</td>
<td style="text-align: left;">rad/s</td>
</tr>
</tbody>
</table>
<p></center></p>
<h3 id="ros-velocity-commands">ROS Velocity Commands<a class="headerlink" href="#ros-velocity-commands" title="Permanent link">&para;</a></h3>
<p>In Part 1 you learnt about ROS Topics, and about how the <code>teleop_keyboard</code> node could be used to publish messages to a particular topic in order to control the velocity of the robot (and thus make it move around).</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which topic is used to control the velocity of the robot?</li>
<li>What <em>message type</em> does this topic use?</li>
</ol>
<p><a href="">Return here if you need a reminder on how to find the answers to these questions (TODO: link to part 1)</a>.</p>
</div>
<p>In Part 1 you also learnt how to find out more about this particular message type, using the <code>ros2 interface show</code> command: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$ ros2 interface show geometry_msgs/msg/Twist
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a># This expresses velocity in free space broken into its linear and angular parts.
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Vector3  linear
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        float64 x
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        float64 y
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        float64 z
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Vector3  angular
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        float64 x
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        float64 y
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        float64 z
</code></pre></div>
<p>There are <strong>six</strong> <em>"fields"</em> that we can assign values to here: </p>
<ol>
<li><code>linear</code>: <code>x</code>, <code>y</code> &amp; <code>z</code></li>
<li><code>angular</code>: <code>x</code>, <code>y</code> &amp; <code>z</code></li>
</ol>
<p>These relate to a robot's <strong>six degrees of freedom</strong> (about its three principal axes), as we discussed above. These topic messages are therefore formatted to give a ROS Programmer the ability to <em>ask</em> a robot to move in any one of its six DOFs. </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Vector3  linear
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>        float64 x  &lt;-- Forwards (or Backwards)
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>        float64 y  &lt;-- Left (or Right)
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>        float64 z  &lt;-- Up (or Down)
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Vector3  angular
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        float64 x  &lt;-- Roll
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>        float64 y  &lt;-- Pitch
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>        float64 z  &lt;-- Yaw
</code></pre></div>
<p>As we also learnt above though, our Waffle Robots can only actually move with <strong>linear</strong> velocity in the <strong>x</strong>-axis and <strong>angular</strong> velocity in the <strong>z</strong>-axis. As a result then, only velocity commands issued to the <code>linear.x</code> (Forwards/Backwards) or <code>angular.z</code> (Yaw) parts of this message will have any effect.</p>
<h3 id="robot-odometry">Robot Odometry<a class="headerlink" href="#robot-odometry" title="Permanent link">&para;</a></h3>
<p>Let's take another look at <em>all</em> the topics that can be used to communicate with our robot:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<p>Another topic of interest here is <code>/odom</code>. This topic contains <em>Odometry data</em>, which is also essential for robot navigation, giving us an approximation of a robot's location in its environment.</p>
<h3 id="odometry">What is Odometry?<a class="headerlink" href="#odometry" title="Permanent link">&para;</a></h3>
<p>We can learn more about Odometry data in ROS by using some of the same key ROS command line tools that we have already used previously (just applied to a different topic or message):</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/odom
</code></pre></div></p>
<hr />
<p>This provides information about the <em>type</em> of message used by this topic:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Type: nav_msgs/msg/Odometry
</code></pre></div>
<p>We can find out more about this message using the <code>ros2 interface show</code> command:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>nav_msgs/msg/Odometry
</code></pre></div></p>
<hr />
<p>The output of this is quite complicated, but - to start with - we can look down the far left-hand side to identify the four <em>base fields</em> of the message (i.e. the fields that are not indented):</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>header</code></td>
<td style="text-align: center;"><code>std_msgs/Header</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>child_frame_id</code></td>
<td style="text-align: center;"><code>string</code></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;"><code>pose</code></td>
<td style="text-align: center;"><code>geometry_msgs/PoseWithCovariance</code></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;"><code>twist</code></td>
<td style="text-align: center;"><code>geometry_msgs/TwistWithCovariance</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<p>We won't worry to much about the first two, it's Items 3 and 4 that are of most interest to us...</p>
<h4 id="pose">Pose<a class="headerlink" href="#pose" title="Permanent link">&para;</a></h4>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a># Estimated pose that is typically relative to a fixed world frame.
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>geometry_msgs/PoseWithCovariance pose
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>        Pose pose
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>                Point position
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>                        float64 x
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>                        float64 y
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>                        float64 z
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>                Quaternion orientation
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>                        float64 x
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>                        float64 y
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>                        float64 z
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>                        float64 w
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>        float64[36] covariance
</code></pre></div>
<p><strong>Pose</strong> tells us the <em>position</em> and <em>orientation</em> of our robot relative to an arbitrary reference point (typically where the robot was when it was turned on). The pose is determined from:</p>
<ul>
<li>Data from the Inertial Measurement Unit (IMU) on the OpenCR board</li>
<li>Data from both the left and right wheel encoders</li>
<li>A <em>kinematic model</em> of the robot</li>
</ul>
<p>All the above information can then be used to calculate (and keep track of) the distance travelled by the robot from its pre-defined reference point (using a process called dead-reckoning).</p>
<p><em>Position</em> data is important for determining the movement of our robot, and from this we can estimate its location in 3-dimensional space. This is expressed in units of <strong>meters</strong>.</p>
<p><a name="euler_angs"></a></p>
<p><em>Orientation</em> is expressed in units of <strong>Quaternions</strong>, which is a mathematically convenient way to store data related to a robot's orientation, but it's a bit hard for us humans to understand and visualise<sup id="fnref:quaternions"><a class="footnote-ref" href="#fn:quaternions">1</a></sup>.</p>
<p>Quaternions use <strong>four values</strong> to represent the orientation of something in 3 dimensional space, as we can observe from the structure of the <code>nav_msgs/msg/Odometry</code> ROS message:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Quaternion orientation
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>        float64 x
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>        float64 y
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        float64 z
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        float64 w
</code></pre></div>
<p>For us, it's easier to think about the orientation of our robot in a <strong>Euler Angle</strong> representation, which tell us the degree of rotation about the <em>three principal axes</em> (<a href="#principal-axes">as discussed above</a>):</p>
<ul>
<li><code>&theta;<sub>x</sub></code>, aka: <strong>"Roll"</strong></li>
<li><code>&theta;<sub>y</sub></code>, aka: <strong>"Pitch"</strong></li>
<li><code>&theta;<sub>z</sub></code>, aka: <strong>"Yaw"</strong></li>
</ul>
<p>Fortunately, <a href="https://automaticaddison.com/how-to-convert-a-quaternion-into-euler-angles-in-python/">the maths involved in converting between these two orientation formats is fairly straight forward</a>.</p>
<p>Recall from earlier however, that our TurtleBot3 can only move in a 2D plane and so, actually, its pose can be fully represented by just 3 terms: <code>x</code>, <code>y</code> &amp; <code>&theta;<sub>z</sub></code>, where <code>x</code> and <code>y</code> are the 2D coordinates of the robot in the <code>X-Y</code> plane, and <code>&theta;<sub>z</sub></code> is the angle of the robot about the <code>z</code> (<em>yaw</em>) axis.</p>
<h4 id="twist">Twist<a class="headerlink" href="#twist" title="Permanent link">&para;</a></h4>
<p><strong>Twist</strong> tells us the current linear and angular velocities of the robot, and this data comes directly from the wheel encoders.</p>
<p>Once again, all of this data is defined in terms of the principal axes, as illustrated in <a href="#principal-axes">the figure above</a>.</p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 1: Exploring Odometry Data<a class="headerlink" href="#ex1" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>In <strong>TERMINAL 2</strong> launch <code>rqt</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>rqt
</code></pre></div></p>
<hr />
</li>
<li>
<p>From the top menu select <code>Plugins</code> &gt; <code>Topics</code> &gt; <code>Topic Monitor</code></p>
<p><em>Topic Monitor</em> should then present you with a list of active topics which matches the topic list from the <code>ros2 topic list</code> command that you ran earlier.</p>
</li>
<li>
<p>Check the box next to <code>/odom</code> and click the arrow next to it to expand the topic and reveal the four base fields that we talked about earlier.</p>
</li>
<li>
<p>Next, expand the <code>pose</code> &gt; <code>pose</code> &gt; <strong><code>position</code></strong> and <strong><code>orientation</code></strong> fields to reveal the data being published to the <em>three</em> position and <em>four</em> orientation values of this message.</p>
</li>
<li>
<p>Also expand the <code>twist</code> &gt; <code>twist</code>, <strong><code>linear</code></strong> and <strong><code>angular</code></strong> fields to reveal the <em>six</em> values being published here too.</p>
<p><figure markdown>
  <img alt="" src="../../../images/rqt/topic_monitor.png" width="600" />
</figure></p>
</li>
<li>
<p>Next, launch a new terminal instance, we'll call this one <strong>TERMINAL 3</strong>. Arrange this next to the <code>rqt</code> window, so that you can see them both simultaneously.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> launch the <code>teleop_keyboard</code> node <a href="">as you did last time (TODO: link to part 1)</a>: <a name="teleop"></a></p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div></p>
<hr />
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-a">A</kbd></span> a couple of times to make the robot rotate on the spot. Observe how the odometry data changes in the Topic Monitor.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <code>pose</code> fields are changing?</li>
<li>Is there anything in the <code>twist</code> part of the message that corresponds to the <code>angular velocity</code> that is being published by the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>? </li>
</ol>
</div>
</li>
<li>
<p>Now press the <span class="keys"><kbd class="key-s">S</kbd></span> key to halt the robot, then press <span class="keys"><kbd class="key-w">W</kbd></span> a couple of times to make the robot drive forwards.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <code>pose</code> fields are changing <em>now</em>? How does this relate to the position of the robot in the simulated world?</li>
<li>How does the <code>twist</code> part of the message <em>now</em> correspond to the <code>linear velocity</code> setting in <strong>TERMINAL 3</strong>?</li>
</ol>
</div>
</li>
<li>
<p>Now press <span class="keys"><kbd class="key-d">D</kbd></span> a couple of times and your robot should start to move in a circle.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>What linear and angular velocities are you requesting in <strong>TERMINAL 3</strong>, and how are these represented in the <code>twist</code> part of the <code>/odom</code> message?</li>
<li>What about the <code>pose</code> part of the message? How is this data changing as your robot moves in a circular path.</li>
<li><strong>What are <code>twist</code> and <code>pose</code> actually telling us?</strong></li>
</ol>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-s">S</kbd></span> in <strong>TERMINAL 3</strong> to stop the robot (but leave the <code>teleop_keyboard</code> node running).  Then, press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> to close down <code>rqt</code>. </p>
</li>
<li>
<p>Let's look at the Odometry data in a different way now. With the robot stationary, use <code>ros2 run</code> to run a Python node that we have created to illustrate just the <code>pose</code> data, and how it relates to the robot's position and orientation in its environment: </p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>tuos_examples<span class="w"> </span>robot_pose
</code></pre></div></p>
<hr />
</li>
<li>
<p>Now (using the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>) drive your robot around again, keeping an eye on the outputs that are being printed by the <code>robot_pose</code> node in <strong>TERMINAL 2</strong> as you do so.</p>
<p>The output of the <code>robot_pose</code> node shows you how the robot's <em>position</em> and <em>orientation</em> (i.e. <em>"pose"</em>) are changing in real-time as you move the robot around. The <code>"initial"</code> column tells us the robot's pose when the node was first launched, and the <code>"current"</code> column show us what its pose currently is. The <code>"delta"</code> column then shows the difference between the two.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Which pose parameters <em>haven't</em> changed, and is this what you would expect (considering <a href="#principal-axes">the robot's principal axes, as illustrated above</a>)?</p>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> and <strong>TERMINAL 3</strong>, to stop the <code>robot_pose</code> and <code>teleop_keyboard</code> nodes. </p>
</li>
</ol>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 2: Creating a Python node to process Odometry data<a class="headerlink" href="#ex2" title="Permanent link">&para;</a></h4>
<p>In Part 1 you learnt how to create a package and build simple nodes in Python to publish and subscribe to messages on a topic. In this exercise you will build a new subscriber node, much like you did in the previous session, but this one will subscribe to the <code>/odom</code> topic that we've been talking about above. You'll also create a new package called <code>part2_navigation</code> for this node to live in!</p>
<ol>
<li>
<p>First, make sure you are in the <code>src</code> folder of the <code>ros2_ws</code> in your terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/
</code></pre></div>
</li>
<li>
<p>Next, use the <code>ros2 pkg</code> tool to create your package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ros2<span class="w"> </span>pkg<span class="w"> </span>create<span class="w"> </span>--build-type<span class="w"> </span>ament_python<span class="w"> </span>part2_navigation
</code></pre></div>
</li>
<li>
<p>Then navigate into the <code>ros2_ws/src/part2_navigation/part2_navigation</code> folder using the <code>cd</code> command again. For Python packages, this is where all executables (i.e. Python files) should be located.</p>
<p>The subscriber that we will build here will be structured in much the same way as the subscriber that we built in Part 1. The difference now though is that this one will subscribe to the <code>/odom</code> topic (instead of <code>/chatter</code> (TODO: confirm topic message in Part 1)), and its callback function will therefore receive <code>Odometry</code> type messages (instead of <code>String</code> (TODO: confirm)), so we'll have to deal with those a bit differently. We've created a template for this to help you to get started. Download this from GitHub using the <code>wget</code> command:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>wget<span class="w"> </span>-O<span class="w"> </span>odom_subscriber.py<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>https://raw.githubusercontent.com/tom-howard/tuos_ros/humble/tuos_examples/tuos_examples/odom_subscriber_template.py
</code></pre></div>
(TODO: update to "main" once available)</p>
</li>
<li>
<p>Next, add some dependencies to your package's <code>package.xml</code> file, above the <code>&lt;test_depend&gt;</code> lines that should already be there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">&lt;exec_depend&gt;</span>rclpy<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">&lt;exec_depend&gt;</span>nav_msgs<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="nt">&lt;test_depend&gt;</span>ament_copyright<span class="nt">&lt;/test_depend&gt;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nt">&lt;test_depend&gt;</span>ament_flake8<span class="nt">&lt;/test_depend&gt;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="nt">&lt;test_depend&gt;</span>ament_pep257<span class="nt">&lt;/test_depend&gt;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="nt">&lt;test_depend&gt;</span>python3-pytest<span class="nt">&lt;/test_depend&gt;</span>
</code></pre></div>
</li>
<li>
<p>Then open up the <code>setup.py</code> file and add an entry point for the <code>odom_subscriber</code> node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>        <span class="s1">&#39;odom_subscriber = part2_navigation.odom_subscriber:main&#39;</span><span class="p">,</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="p">]</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Finally, head back to the terminal and use Colon to build your new package and it's executable:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>Now we're ready to run this! Do so using <code>ros2 run</code> and see what it does:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>odom_subscriber
</code></pre></div>
</li>
<li>
<p>Have a think about what's different between this and the subscriber from last time...</p>
<p>In the Subscriber from Part 1 we were working with a <code>String</code> type message from the <code>std_msgs</code> package, whereas this time we're using an <code>Odometry</code> message from the <code>nav_msgs</code> package instead - notice how the imports and the callback function have changed as a result of this.</p>
</li>
<li>
<p>You need to add some additional code to the callback function now: </p>
<ol>
<li>The node needs to print the robot's real-time odometry data to the terminal in the form: <code>(x,y,&theta;<sub>z</sub>)</code>.</li>
<li>The format of the message has already been structured for you, but you need to add in the relevant variables that represent the correct elements of the robot's real-time pose.</li>
<li>You'll need to use the <code>euler_from_quaternion</code> function (defined within the script) to convert the raw orientation values from Quaternions into Radians. If you need a hint, why not have a look back <a href="#euler_angs">at this bit from earlier</a>, or at the source code for the <code>robot_pose.py</code> node that we launched from the <code>tuos_examples</code> package in the <a href="#ex1">previous exercise</a>. </li>
</ol>
</li>
<li>
<p>Observe how the output (the formatted odometry data) changes whilst you move the robot around using the <code>teleop_keyboard</code> node in a new terminal instance (<strong>TERMINAL 3</strong>).</p>
</li>
<li>Stop your <code>odom_subscriber.py</code> node in <strong>TERMINAL 2</strong> and the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong> by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in each of the terminals.</li>
</ol>
<h2 id="basic-navigation-open-loop-velocity-control">Basic Navigation: Open-loop Velocity Control<a class="headerlink" href="#basic-navigation-open-loop-velocity-control" title="Permanent link">&para;</a></h2>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 3: Velocity Control from a Terminal<a class="headerlink" href="#ex3" title="Permanent link">&para;</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that you've stopped the <code>teleop_keyboard</code> node before starting this exercise!</p>
</div>
<p><a name="rostopic_pub"></a>We can use the <code>ros2 topic pub</code> command to <em>publish</em> data to a topic from a terminal by using the command in the following way:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span><span class="o">{</span>topic_name<span class="o">}</span><span class="w"> </span><span class="o">{</span>message_type<span class="o">}</span><span class="w"> </span><span class="o">{</span>message_data<span class="o">}</span>
</code></pre></div>
<p><a href="#ros-velocity-commands">As we discovered earlier</a>, the <code>/cmd_vel</code> topic is expecting messages containing <em>linear</em> and <em>angular</em> velocity data, each with an <code>x</code>, <code>y</code> and <code>z</code> component. When publishing topic messages in a terminal the commands can get quite long and complicated, but we can use <em>autocomplete</em> functionality to help us format the full command correctly. In <strong>TERMINAL 3</strong> <em>type</em> the following, using the <span class="keys"><kbd class="key-tab">Tab</kbd></span> key where indicated to invoke autocompletion...</p>
<hr />
<p><strong>TERMINAL 3:</strong></p>
<p>First, press <span class="keys"><kbd class="key-tab">Tab</kbd></span> to complete the <em>topic name</em> for you:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>ros2 topic pub /cmd_[TAB]
</code></pre></div>
<p>Then, press <span class="keys"><kbd class="key-tab">Tab</kbd></span> to format the <em>message type</em> correctly: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>ros2 topic pub /cmd_vel g[TAB]
</code></pre></div>
<p>Finally, press <span class="keys"><kbd class="key-tab">Tab</kbd></span> again to obtain the format of the <em>message data</em>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/Twist &quot;l[TAB]
</code></pre></div>
<p>The full command will then be presented:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/Twist &quot;linear:
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>  x: 0.0
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>  y: 0.0
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>  z: 0.0
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>angular:
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>  x: 0.0
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>  y: 0.0
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>  z: 0.0&quot;
</code></pre></div>
<hr />
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <span class="keys"><kbd class="key-tab">Tab</kbd></span> to autocomplete lots of terminal commands, experiment with it - it'll save you lots of time! </p>
</div>
<ol>
<li>
<p>Scroll back through the message using the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key on your keyboard and then edit the values of the various parameters, as appropriate. First, define some values that would make the robot <strong>rotate on the spot</strong>.  </p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the message from being published.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>What happens to the robot when you stop the <code>ros2 topic pub</code> command?</p>
<p>... it keeps on moving at the requested velocity!</p>
<p>In order to make the robot actually stop, we need to publish a <em>new</em> message containing alternative velocity commands.</p>
</div>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> press the <span class="keys"><kbd class="key-arrow-up">Up</kbd></span> key on your keyboard to recall the previous command, but don't press <span class="keys"><kbd class="key-enter">Enter</kbd></span> just yet! Now press the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key to track back through the message and change the velocity values in order to now make the robot <strong>stop</strong>.</p>
</li>
<li>
<p>Once again, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the publisher from actively publishing new messages, and then follow the same steps as above to compose <em>another</em> new message to now make the robot <strong>move in a circle</strong>.</p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to again stop the message from being published, publish a further new message to stop the robot, and then compose (and publish) a message that would make the robot <strong>drive in a straight line</strong>.</p>
</li>
<li>
<p>Finally, <strong>stop</strong> the robot again!</p>
</li>
</ol>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 4: Creating a Python node to make the robot move in a circle<a class="headerlink" href="#ex4" title="Permanent link">&para;</a></h4>
<p>You will now learn how to control the velocity of the robot through a Python Node. In Pat 1 you built a simple publisher node, and this one will effectively be the same thing, this time however, we need to publish <code>Twist</code> type messages to the <code>/cmd_vel</code> topic instead... </p>
<p>In <strong>TERMINAL 2</strong>, ensure that you're located within the <code>scripts</code> folder of your <code>part2_navigation</code> package (you could use <code>pwd</code> to check your current working directory).</p>
<p>If you aren't located here then navigate to this directory using <code>cd</code>.</p>
<ol>
<li>
<p>Create a new file called <code>move_circle.py</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>touch<span class="w"> </span>move_circle.py
</code></pre></div>
... and make this file executable using the <code>chmod</code> command.</p>
<hr />
</li>
<li>
<p>Open up this file in VS Code. </p>
<p>Use this code template to get you started:</p>
<div class="highlight"><span class="filename">A template for the move_circle.py node</span><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="kn">import</span> <span class="nn">rclpy</span> <span class="c1"># (1)</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="c1"># (2)</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="c1"># (3)</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">publisher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">()</span> <span class="c1"># (4)</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>        <span class="n">rate</span> <span class="o">=</span> <span class="c1"># (5)</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">rate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timer_callback</span><span class="p">)</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>    <span class="k">def</span> <span class="nf">on_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>        <span class="c1"># (6)</span>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>    <span class="k">def</span> <span class="nf">timer_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>        <span class="c1"># (7)</span>
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span>
<a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a>        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
<a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a>        <span class="n">signal_handler_options</span><span class="o">=</span><span class="n">rclpy</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">SignalHandlerOptions</span><span class="o">.</span><span class="n">NO</span>
<a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a>    <span class="p">)</span>
<a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a>
<a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a>    <span class="n">move_circle</span> <span class="o">=</span> <span class="c1"># (8)</span>
<a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a>
<a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a>    <span class="k">try</span><span class="p">:</span> <span class="c1"># (9)</span>
<a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">move_circle</span><span class="p">)</span>
<a id="__codelineno-28-37" name="__codelineno-28-37" href="#__codelineno-28-37"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-28-38" name="__codelineno-28-38" href="#__codelineno-28-38"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shutdown requested with Ctrl+C&quot;</span><span class="p">)</span>
<a id="__codelineno-28-39" name="__codelineno-28-39" href="#__codelineno-28-39"></a>    <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-28-40" name="__codelineno-28-40" href="#__codelineno-28-40"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">()</span>
<a id="__codelineno-28-41" name="__codelineno-28-41" href="#__codelineno-28-41"></a>
<a id="__codelineno-28-42" name="__codelineno-28-42" href="#__codelineno-28-42"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">move_circle</span><span class="o">.</span><span class="n">shutdown</span><span class="p">:</span>
<a id="__codelineno-28-43" name="__codelineno-28-43" href="#__codelineno-28-43"></a>            <span class="k">continue</span>
<a id="__codelineno-28-44" name="__codelineno-28-44" href="#__codelineno-28-44"></a>
<a id="__codelineno-28-45" name="__codelineno-28-45" href="#__codelineno-28-45"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">destroy_node</span><span class="p">()</span>
<a id="__codelineno-28-46" name="__codelineno-28-46" href="#__codelineno-28-46"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
<a id="__codelineno-28-47" name="__codelineno-28-47" href="#__codelineno-28-47"></a>
<a id="__codelineno-28-48" name="__codelineno-28-48" href="#__codelineno-28-48"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<a id="__codelineno-28-49" name="__codelineno-28-49" href="#__codelineno-28-49"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<ol>
<li>This is important, we always need to import the ROS Client Library for Python (<code>rclpy</code>), plus a <code>Node</code> class (to use as the basis for you own ROS node).</li>
<li>What other imports might we need here in order to create and publish a message to make the robot move?</li>
<li>Give your node a descriptive name - this is the name that it will be given when it is registered on the ROS network, and the one that you would see if you used the <code>ros2 node list</code> command.</li>
<li>What do you need to add here in order to set up an appropriate publisher to the <code>/cmd_vel</code> topic?</li>
<li>Define an appropriate rate at which to publish velocity messages, and use this to set up a timer.</li>
<li>
<p>We'll use this to perform some important shutdown operations after a user has requested for the node to stop (using <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>), but before it actually does so. </p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What actions would be important to take here to make sure the node shuts down safely and the robot actually stops moving?</p>
</div>
<p>We'll call this method from <code>main()</code> before ultimately terminating the node (see later on in the code).</p>
</li>
<li>
<p>You're going to need to create a message here containing appropriate velocities for the robot to move at. Then you'll need to actually publish that message to <code>/cmd_vel</code> (via your <code>self.publisher</code>). Running this inside a <em>timer callback</em> means that it will execute the rate that we specified in the <code>__init__</code></p>
</li>
<li>
<p>What will you need to do here to instantiate your <code>Circle()</code> class?</p>
</li>
<li>
<p>We call <code>rclpy.spin()</code> inside a Try - Except block, so that we can catch a <code>KeyboardInterrupt</code> (i.e. a <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> input from the user) during execution of the node. All shutdown procedures are executed from within a <code>finally</code> block, which ensures that all of these vital steps take place when an exception is raised (whether that's a <code>KeyboardInterrupt</code> or otherwise).</p>
</li>
</ol>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:quaternions">
<p><a href="https://automaticaddison.com/how-to-convert-a-quaternion-to-a-rotation-matrix/#What_is_a_Quaternion">Quaternions are explained very nicely here</a>, if you'd like to learn more.&#160;<a class="footnote-backref" href="#fnref:quaternions" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-08-14T15:35:26+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-14</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-08-07T15:33:30+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-07</span>
  </span>

    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../part1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 1: Getting Started with ROS2">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 1: Getting Started with ROS2
              </div>
            </div>
          </a>
        
        
          
          <a href="../../assignment2/" class="md-footer__link md-footer__link--next" aria-label="Next: Assignment #2: Team Robotics Project">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Assignment #2: Team Robotics Project
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2024 (License: <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC</a>)<br /> <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to monitor the usage of these resources, and to understand how effective they are in supporting your learning. Cookies also help us to evaluate how much impact our teaching materials are making in the community. With your support, you are helping us to make our teaching resources better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>